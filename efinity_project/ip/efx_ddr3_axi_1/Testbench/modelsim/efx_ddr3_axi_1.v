// =============================================================================
// Generated by efx_ipmgr
// Version: 2023.1.150
// IP Version: 5.1
// =============================================================================

////////////////////////////////////////////////////////////////////////////////
// Copyright (C) 2013-2023 Efinix Inc. All rights reserved.              
//
// This   document  contains  proprietary information  which   is        
// protected by  copyright. All rights  are reserved.  This notice       
// refers to original work by Efinix, Inc. which may be derivitive       
// of other work distributed under license of the authors.  In the       
// case of derivative work, nothing in this notice overrides the         
// original author's license agreement.  Where applicable, the           
// original license agreement is included in it's original               
// unmodified form immediately below this header.                        
//                                                                       
// WARRANTY DISCLAIMER.                                                  
//     THE  DESIGN, CODE, OR INFORMATION ARE PROVIDED “AS IS” AND        
//     EFINIX MAKES NO WARRANTIES, EXPRESS OR IMPLIED WITH               
//     RESPECT THERETO, AND EXPRESSLY DISCLAIMS ANY IMPLIED WARRANTIES,  
//     INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF          
//     MERCHANTABILITY, NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR    
//     PURPOSE.  SOME STATES DO NOT ALLOW EXCLUSIONS OF AN IMPLIED       
//     WARRANTY, SO THIS DISCLAIMER MAY NOT APPLY TO LICENSEE.           
//                                                                       
// LIMITATION OF LIABILITY.                                              
//     NOTWITHSTANDING ANYTHING TO THE CONTRARY, EXCEPT FOR BODILY       
//     INJURY, EFINIX SHALL NOT BE LIABLE WITH RESPECT TO ANY SUBJECT    
//     MATTER OF THIS AGREEMENT UNDER TORT, CONTRACT, STRICT LIABILITY   
//     OR ANY OTHER LEGAL OR EQUITABLE THEORY (I) FOR ANY INDIRECT,      
//     SPECIAL, INCIDENTAL, EXEMPLARY OR CONSEQUENTIAL DAMAGES OF ANY    
//     CHARACTER INCLUDING, WITHOUT LIMITATION, DAMAGES FOR LOSS OF      
//     GOODWILL, DATA OR PROFIT, WORK STOPPAGE, OR COMPUTER FAILURE OR   
//     MALFUNCTION, OR IN ANY EVENT (II) FOR ANY AMOUNT IN EXCESS, IN    
//     THE AGGREGATE, OF THE FEE PAID BY LICENSEE TO EFINIX HEREUNDER    
//     (OR, IF THE FEE HAS BEEN WAIVED, $100), EVEN IF EFINIX SHALL HAVE 
//     BEEN INFORMED OF THE POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO 
//     NOT ALLOW THE EXCLUSION OR LIMITATION OF INCIDENTAL OR            
//     CONSEQUENTIAL DAMAGES, SO THIS LIMITATION AND EXCLUSION MAY NOT   
//     APPLY TO LICENSEE.                                                
//
////////////////////////////////////////////////////////////////////////////////

`define IP_UUID _55c5f74154e14e1f84d3aac973693f53
`define IP_NAME_CONCAT(a,b) a``b
`define IP_MODULE_NAME(name) `IP_NAME_CONCAT(name,`IP_UUID)
module efx_ddr3_axi_1 (
input clk,
input core_clk,
input twd_clk,
input tdqss_clk,
input tac_clk,
input reset_n,
output reset,
output cs,
output ras,
output cas,
output we,
output cke,
output [15:0] addr,
output [2:0] ba,
output odt,
output [2:0] shift,
output [4:0] shift_sel,
output shift_ena,
input cal_ena,
output cal_done,
output cal_pass,
output [6:0] cal_fail_log,
output [2:0] cal_shift_val,
output [1:0] o_dm_hi,
output [1:0] o_dm_lo,
input [1:0] i_dqs_hi,
input [1:0] i_dqs_lo,
input [1:0] i_dqs_n_hi,
input [1:0] i_dqs_n_lo,
output [1:0] o_dqs_hi,
output [1:0] o_dqs_lo,
output [1:0] o_dqs_n_hi,
output [1:0] o_dqs_n_lo,
output [1:0] o_dqs_oe,
output [1:0] o_dqs_n_oe,
input [15:0] i_dq_hi,
input [15:0] i_dq_lo,
output [15:0] o_dq_hi,
output [15:0] o_dq_lo,
output [15:0] o_dq_oe,
input [15:0] wr_datamask,
output [127:0] rd_data,
input [127:0] wr_data,
output rd_ack,
output rd_valid,
input rd_en,
input rd_addr_en,
input [31:0] rd_addr,
output rd_busy,
output wr_ack,
input wr_addr_en,
input wr_en,
input [31:0] wr_addr,
output wr_busy
);
`IP_MODULE_NAME(efx_ddr3_soft_controller) u_efx_ddr3_soft_controller(
.clk ( clk ),
.core_clk ( core_clk ),
.twd_clk ( twd_clk ),
.tdqss_clk ( tdqss_clk ),
.tac_clk ( tac_clk ),
.reset_n ( reset_n ),
.reset ( reset ),
.cs ( cs ),
.ras ( ras ),
.cas ( cas ),
.we ( we ),
.cke ( cke ),
.addr ( addr ),
.ba ( ba ),
.odt ( odt ),
.shift ( shift ),
.shift_sel ( shift_sel ),
.shift_ena ( shift_ena ),
.cal_ena ( cal_ena ),
.cal_done ( cal_done ),
.cal_pass ( cal_pass ),
.cal_fail_log ( cal_fail_log ),
.cal_shift_val ( cal_shift_val ),
.o_dm_hi ( o_dm_hi ),
.o_dm_lo ( o_dm_lo ),
.i_dqs_hi ( i_dqs_hi ),
.i_dqs_lo ( i_dqs_lo ),
.i_dqs_n_hi ( i_dqs_n_hi ),
.i_dqs_n_lo ( i_dqs_n_lo ),
.o_dqs_hi ( o_dqs_hi ),
.o_dqs_lo ( o_dqs_lo ),
.o_dqs_n_hi ( o_dqs_n_hi ),
.o_dqs_n_lo ( o_dqs_n_lo ),
.o_dqs_oe ( o_dqs_oe ),
.o_dqs_n_oe ( o_dqs_n_oe ),
.i_dq_hi ( i_dq_hi ),
.i_dq_lo ( i_dq_lo ),
.o_dq_hi ( o_dq_hi ),
.o_dq_lo ( o_dq_lo ),
.o_dq_oe ( o_dq_oe ),
.wr_datamask ( wr_datamask ),
.rd_data ( rd_data ),
.wr_data ( wr_data ),
.rd_ack ( rd_ack ),
.rd_valid ( rd_valid ),
.rd_en ( rd_en ),
.rd_addr_en ( rd_addr_en ),
.rd_addr ( rd_addr ),
.rd_busy ( rd_busy ),
.wr_ack ( wr_ack ),
.wr_addr_en ( wr_addr_en ),
.wr_en ( wr_en ),
.wr_addr ( wr_addr ),
.wr_busy ( wr_busy )
);

endmodule

//pragma protect
//pragma protect begin
`protected

    MTI!#e\n$B=,e<<vWTCJwVG_*@zQ~w'Au5KVO}3-w&|)[7WXOXxe1r^$~H1IC2<2X{x=7#PcYlwE
    s+nZ@aQxvjk}]irz!w$wIi@DFzx^QI}VCXvsQV5T3N)V#A2Y$^!]^l\;Am^V#zKR,G,w]nHL}#=k
    -+Ap=\!uk_$n=<OCDJ<<FqhkaHre@{7G5u<*YrDz*w5IawUA$i'++-$j$~\#=]-@jmU7oU@7BOkz
    $1YV2$O^z;^}iuG9I_\A7+e^To-3^G++;<-x[u@oFXo[Z@NeaJzRD[XKn5$=#@$}>[nI_7_|DIDA
    CEJ'\=V2VivGIE7x*'2zyYJT2fGj3rk=o+C2>lUs@v>REvRJU$A5v$Trn'ajEpksQ~x#7J}vpeY[
    <[*-B@mT2A5nG]i|Nx^o[>T^zYDw2'V_X$jRB^/#r='}ei}'U-?,RKO_rvGKz>{q3=v['zJJ$\\=
    AC@;eo?BOwWon>QUvj{Qzx1zQ5RkIzV^JD@3L?vABv=_!DEmI?aV'Ua]!IG#2QGJ>i[]E|AY13W6
    E+I*&iw{]}mZOXDmKceskJvpB~Qmv@B>vz*[+BJw;@uT=Gi]$G}apv)%iEEVrEJ$)KD#nv^(';!m
    ?'QW$}{,;Yu+^--O<5?Dx'p~7;*m]zXH}KJz>vvZ5i5[]RV]2\V~AH]7?QmoTrEnK>HXoj@G,uX,
    W]\~Y@,W,QsXfe3r2X7#k?^Tv~{>2~'@7+rk]>'n,L&t*n[DL5<@u35wA>1}<H7=pA']Uwjw@}ei
    D1H-5KI2Ca7J];<[={|;a7egM{BOHOExT'#,pfr2_}FEJ;Wr^5eK7T;s+W[I~aG{eH#Yi
`endprotected
//pragma protect end


`include "ddr3_controller.vh"
//pragma protect
//pragma protect begin
`protected

    MTI!#']\-I=a*7u!\mllz<H<}a^$3sEXp6R2j[CJI^}m<@d7?Croo;QF*I!=2oQ<ar]]-a2=]'2z
    1AZOcX7+2U{){Ck;G$k\s{ErsSKwJUz^;}):VaDRn[~K7_rY3A7~CU;=Xwe@uY7[U]n>li'}pJO]
    C|iT<vj=wpoI!5[z[-^ImI}Z'$3RWCr2=V;B<G_iw;p!<xa,2_DRBGlO3*I;5Cpl\}P^#'~o\rvv
    -o1NuoBuNv^m2N]5r[C<,O7>!I1w-rq27%$Fi<Tj,5_Dsws<vU1=I#,Rj-luiIFtkv;}XaKTkEoV
    oDvYpGv}-<XoE)O,o!'R~R<$WIb5*KO\~^7BiKBI1~B@C#Ei,lU'K2Z\{;WB%mlJ?^eK_hj][5/{
    '*-pXQCr^lT3\-BY^Y#<B'[1_<D\*&=X+r@xevOwpzmG<p7;+AC5BjK'Aju1OC*K7roA}ZFCzK;S
    3HG]vk<2G^e~3YJ{IAuI#|c@p-BGi['C]p#vn'YB5$p7+}eLk<VGa+;5jpOAx5asVH!_zW=TrQ22
    nea!A+V2]Es$U[,-4dE-jv}2m+<s'?yV7JTN'3<@_#lea$K@x>uk5O+]$,T'$zuXIVT5Uz?>E6up
    <rCvGE|*Zn~7i<rIHE<!A>^zAr]iA5H},r*j'ET_>B#o?,B{Tma7u*TOmnY+D\XT$J}_*,#;zw@'
    OjAY~s5UR?AEJjY-{_BQV^p0:!>-u=wW,v2{+QzRI__1KBBjD@AB^6[2TTW]zHW'!T0t[Z[>Ap'r
    $BAZvWJ*iRJ?a=_KUI{oNwsQlB=],#<Do^k>CFe@=K,w7~7N{+<ZjD_Qx|m>Ykb+pz<^\_{M@e$x
    UoXV]>s1V_{KTGA$7JZrjC7!VU}W=2<sDpK'aIGoEJ_aUIe#,;nK,Rs{<xo@]rvG{vi_6+,m3oIK
    {$O}_UDE'"FxKE?TzlGDvXrI{l7+,$^b_aB[bCHp]]DXH@H@[D$k-=e,@^jI3)Hj~u&^:^3{@nQo
    I'Y+GOUnZjxnu>{O!UE+sO;UO={==^^75AqBlUQWVC]+j]Bi}\\7v-D%35s~bB+jHaH'a5\7m3VO
    njCU*/,Ll5-kXX{[H'D#]+~1VK1-v'mIKE^mFC!XU]jX\uE7jr7VT5>xDv\AU5@3n_nzY=i;]ouU
    CmYnADBoI!n@{Y}_\TB^j3R;rAY3u^r5i~w'3+'?[-]+]5RiW^@31W_y]VC!lR$Q=Vip:w<u[kv]
    k4E[T~C\JK;C[rG}$7Spm3>eYJ1xH3JY--Eq>qSA$AJ\BxC<1<\mH$R;VAUCknUIi=B\LC^<*eGi
    ]ouAe*VO-a{nI@Y]~^8>><HzwT*RX*;zIDei$\O5Xms,Zrl$WoXQhIe1>%Joo7T7<]L"No{_pyA&
    15EY6,1KwWanWQ#5sTx#aFQG^{B,+vsX]UP,TB{7TIuwwYkEn!rs{Da1+2\$,vHw{\Z]9$WE?]xp
    x&IA[H=KQ[X'A~25u^[wnr_kD~Br3H0Kp1@BE@>Y+<?Bkm!N8B>1w>rin;A>W$>[jxBYC^;m;r~m
    xA5BG25UO5Hus,lKr\oJ<}EHB^e#7!s#Qlar$*$a}aQ-A]#zx5k=]J{*>1A[ro@CuCX<_sQB1}B{
    UZ>I][\n]7?o@$aAW=Uw^5v!zBIQ=$JJ,3pKZ*1Hks[*jFBk^X&:#5Zp+'\szzAsrxZw$5-kaalo
    %I?l@_-j@!'Kun_aXo^K2jkaKu,>p4W$}3}3HUpY-w>*kk~Qz=_!{*mwE^Wau}!$QX'<sTwwB<'\
    sazQ>KS\eu[1BY2wX,31D_H$\QvR3,k,xnol'Z7v2_r'k~mlEXX~}p51,YCH5YAf~Tv'2eC+[lsW
    ]~7p#D=XE@Z}'vO~vOs#!'Xx}!nV~zsCwlHr$BnT{_<A5kBi2}T^]2tK^G}J*G*jOT*VVkOneIpo
    T5@-7Ju_=aUk<Dr/eBKU}[27z3Ioz=r]Ee1ox]{1__1~GAG?B@uB3=<2avr[sGx$!DVH'w<;E3A!
    r}sAI!poa-XHloA@KE^Q|8J<J7d>>]TJ_eQ1}ve{YC;45<]VD1prG]]a<r{[nGeTnV+JA*B7IexV
    7@w1$+sY,?RDIZ2^QUlU$Di~ae'DCeHkpk<w,aVas]>-Xo>lXr<W_@mu;[rkzuDu?<vT1{Wkul=}
    U>13GYs*xvv[sJrr%|q3G'#}IK[bw-+u-U>r\x\T\x]=><r!BJmX[$jDD=J@<\!*.!<5I8xO2^7E
    ?pI3U=taV$ZIIUAZo_?p,K27=ZBo'$1eJK36eg=K$?G?$De{CvUeI~IvK^2}{wK\x>^AO}=?\I=@
    !jH_-'$+>>Il7rXl{@UAIi5~oU%irrelwaV$D*rIz?esTH?BqoAj-D='wwCwU]aHm=IrY,Ylj:on
    a}#XXe1Tz3mTswR[G}P@^@ofH7A@kovE^m';^xT{6B7Jr<X]#GZvD[a-7^^l#vT*^P}F-w5Trz;]
    moZJf}*'ka,$#'in@lW}]sC<R}x2@U(7;DmZv*EGaZsIp\KsIOE!E'K*AGT^kr@Ao1$}Tmk>'@ld
    x,i2r-3]okA<zT{C0EjGm[Kn\=>r#nE#n};!,,wD#<VC<TY,D7\X?,s+oujGI\k5*7{}Y2Ho#[iO
    <[U}p6\V#nEA<D1?_$!_jr$xmeVx<a{zxIn\O~V^@rur<U=>,Chr$^rZT'xfXA_ld5UlROD-lBUj
    R?,*j0DZ@H<A1aYGkD@>Ir=*3+]C[C}]w71,iVkt9~<XKpQKBZlKZsW3p>\@\E-'i'}GT]R$29E[
    Q^6npj,s^noVnHa<BY^j;^->7is2<=jE<AE@axp[k}]Hn~s3+5Bjf,}'v-z5]x2<jtm]zIpiWI52
    o-iEaC&s7'JA^m{oCGxD2RW2$pV!hD7U3mr[o$>~JY3VzI*=l52v+LI<*#i,#J0ss<Ua,KO@oVx^
    j[$p=G\hs2$@?oYuGHVjjED!}x@C\\m@5?@o5U+l.r=VCtT\B~82-ul}*X!lCJ!}$$^vlo^V?^T[
    \p7Y1xoE?[p$5mTp-1oJXmBh(!_'ix<DI/=>;E7?I+kjiE~+]EiY<>!YJ?QQ@@C7V$UnnT+$p!q(
    -T@!SIH<JB5v>}QAaGkoWok_,P=CrrIJws,p?Jq=n<}jA}lapw'f;G_'3x>IjD$zmEd1,~l*e$Cy
    w*XJwpw#ho,nH<sI[e*?##{_I-rA=}n5nyppX-$n7j=U~}!eAGC<(<=snNl@Z#B;]vYBm'naa_51
    7-Y\\5xKDHZzs@AD_!-X=[2'Z$UB-#bU]5oxvms&p!WJlJW#a$kOQsv~;UAX@V]J^U,7Rz-K?BRz
    =='VE*Aw5wGKKjD[I1i1s=V\~CV!.>V}YmXUx}3;R$RBG1&KU-+uV[Ao@@*ba-;pMb71Ao<]Q7DA
    2,lrR-RD}@5_,B4Qz3YRnooheRJnjx7^xuaK:1Z,IpG;wv?aeUrVn;Gi[D^X#skGB}=_CK>W-W<X
    lyWT+uOuv3O<>5As<7EY*oYi(pa~lD<@3IXCuVXHlvn-7ZjH^}w,{'+lu3]-2l_;]?5In=5orl3<
    'd]\3XorD!TtIXrl31wD3Hv{{{,aU+Vpr<&{O}~=+]Q'~TKyYk_]vUIKJQm{$5{ZjJ7p~]}$BCp'
    [R*1$ci-}^:h7Gevsv1IDXu,COO!T{pu<>s5<\V-/D~>CPpysjJkaED!inHp}?nxnx@k\DQ,je-?
    72]^'GXswe5QDmT##+<}=D7ooB;@=IIi'D{zI{XQDoi}7mZ;E+vA2+u#CAC[7-K\<_<#3Ye~NXCQ
    <ssln=R??vzHmaYumk5W]]{\*_I\IkOa[Xv3^7BaY=3JIR]i^[j{of{YD7[B1JU^?{kz-TP.a<m^
    len;m1Q1^3,$lZmw'Y\H:[;RWj\1~!wYv<s+GY+^ZT,?,g[Ez<3>1eI},+5\lnvrziRup5kYR3,E
    @@}4GoK}^sp{1iQsX{KV}=k24_kK7vi7}EYR\jWp-aU>p%EIY+jYp==Vv*r3H,_GT>o_KJIRIk[Z
    UKx@XXV[\;xKB=A[[>mAQRhieWa\snna<7Jl=zXKaEm?*VB*26AzjW'D][;},un]CQKv,iJ=~wwT
    B=]^>{72<ow<Krp]VkwEpDR*E3<,_nu];'+O*mg_}[C<IrKL[~YZ^wZT'vuXCJp}gGGj*m'C[d~w
    1jG?j]d-$7rz?uBl&Yp+U-Yn1K]\p#aGa3Cua@7i!CDE*xrYzLQOGH;V$'A1B7G{D1aI3sK'=5Qr
    k2nw*[b7n!^C>B1R8ez'n'5laG!x\Sn*+>p^m!E^x3eKA-C'jQyo3JX9xaJ-TC}2J1To;$sQJHQ$
    UD<#vA^xn-z-PI%UsmR@j~B@*m2u^C>mrlHVuj[R}>_YHDT0GR**EoG=\U>;^Tju{ekp'R~no"2U
    [+}mDaE1eY,nzzzA$^+|R['B*W<u}n{Hx2}}5*BGIp[lDs-P}91UsI-=?_DI<xDCi[kCWY#+!Tp4
    jH_R,$I^j~<HGU,~j{]IYADn\-E7oK~^[iEQ5l7ipT2m<TWak<jQ${@]mvK~jU;D[[OiIvvn>rZ^
    7HJAEmo?w>Z}JA'Ju5w^[2w,ACQ{B\TE5',GOWYEp^vRO}kmVW3?l{JDIvlBVrD#_HAvS1+}Qi5Y
    '/!{QorQun_eW5T=[~Jou+IW~{^o}@pWu]1rKD~D+@y@EIUwz~B#YDj}C=X[~E~[wjWV%-<5z"}Q
    K~6tq1-5^s8E!\aa$}Vs=j5KlBUWY\?l^A-1W!~LKC*!#$l;hr]<T'Y_]MO_pX/!7-p@5D@R#uEw
    [vj;}{Zp3le%{_wko5Ez[ZKrEZ~uEu!]=EEx._\wo+,YIz}D29apAnIQ[R+w7I-<@{ekCw>eK^GZ
    ]=(<E\j_5*T\?RULO_El2ov{DJQ7%2-aarfYB$~?-<wD*D$$ovX[pX{I!ze;ULU9#E~m1A=sY5rH
    vvuTE;naVvT3]a*R_Ys@^~I#@ATu}Ev<DxmeIYpzOJ1JV^-sPYCw't5uA=i1W{B!=?=vWmmTp@_I
    ]$kH<-<xax?=}~BQv22C<!w5+,Z=HTP1YT>{EIx~XDQ/B3JW'l{k=ZJC\aO_&-T\$d'KE]b[C-p<
    *$-^V'X_ljJG'IUJ]n-jrV?Cv~E!$mGw[@jXEB{eC3~GG<~R*'Zx*7w,^-e~^I,VInQT_n<IIuB$
    @;~OJ-s*<B\aQn}G1D{&.rB$Jw=Ix*,2vVYkm,+wByk1A-!<W+K[Uun+**3}K3ZDIBXBeR<{o@m_
    CICG7$M/dE5;edC2^@=X<E:x<nk}][!\eZ>+n@5{r{?\jA~Da'ZsI,I>_,=OUBr0~GDrx!Rn=3Ro
    \}#3p?l1H=lTHUKBR$7+-}OK+CU\,e\ZJsnz?>[^AHaWT<enw5;Uaj3!>p_7OKQ$]R\_>l>YOU^~
    [Gw+1_$2s_'O=*ux=-'>W]{s2AxjB!*B**-~k,jn\RVJs=[__O3Rm1<e"?<H^]]{]zHW?+x\oinm
    }GZei7IkvH5T}%IKzXUVImNz~{7wRO[}vw?]Hv-*<]!ezn^JTze2_n+XUUeV*a]zlu\<v{37m~Z}
    A,R=k<n^?1$^z1+RkBupz>T2vO#6^/XxA!5,e^e3V2s#VmU$@r$*o~][RTe<oQ\lw$7lY\&p]e+K
    EORzAViV&vyzD{VC#osr};=DU<#>si$^QA{A*KzX}~}>]Rp@}ouk$ZE8b|Zra]-Y]2rAT?j71?_U
    =Y\>l-B,Wsa$vH[Y5{uH@-+o]CvwC2*nDGs5iz@\j!$oR*qox!=,Zv?sYEVInCa+CT2^sji}p_~K
    Q11~<$Ou'nZ*Il^[p-<H,sTVHQpoj1O1wsRE3prw[7B)Aw<@iAewz7!IjKXVCH1u-C^w-o_^Hju]
    JAf.JR^#Cza_p+{}$7k[QmB^Qd{EuAgw{X2aDk~ZwC~l-\Uv^r=#l1JUAA$CZ+GI}l;1Ha{[WO;+
    n,YsA-mYGaTKpu?<A7C@7?\&)nD#Z13opVC'{CJmV@wJu^3;lZO+oZvvNf2rz@2DX?*]~+b#sEpn
    we[pDsUnolz3H@xYWX27#O<mX[e_XY@r8y+&#H!RnYBOD=<G>lR[:aaKp#Lu[o]s7WU\HTSBE+Dk
    s'$r5H=J_-mse^plIBs;HrGp1YV1iVo@rE^Qm;]|m=BE~[K]k<Up2Dx]o,R[sWCK7~^o37nOv-=i
    tVR-v]Uv,
`endprotected
//pragma protect end


//pragma protect
//pragma protect begin
`protected

    MTI!#(/Q1V-<>{7$2>eD23@%XIO?[?2Q#[w\""=#RihJ'<=E3'*=oO,}5,+eDk=m$k$5T{[6}V3[
    mU_-<'k$_rPlwJ#*+[[o_n=['CW!Ul$HUlOCl~^=M>wa-kaz_6h7k7K?E2=/w8[@J$}+XJ9I<!W7
    XA@^;R_elHefR;Vzz_*3{R?jp^V!nDG~{<AwleXr5jI[enl~\RBD$t=i1U!U{UDsoI_$s;oT;#In
    @DoF7eIws_D,popC]\ImowoXjEoW5BzG]V5<OT~m*z$W:@X_(#,]x5wsU$?Y=r^rWHAArR<VHRkY
    ,+^\j;_-R=s?Qxmuv0/}'3CIkou^zWelxW\zjw1RCV*Y'$}[,?^zW@_-.2EExVDuw;<*A$UmQ=Vs
    ~JR5IE<;#Z]9kE\e$s}[\V*Z5UW3)i-x{5EBm2VT~~pC^^W!+q=mUA}kl]]+AeFI*D=PM}TZ=@On
    <V3J@e**};o<r5J{#&IEx^5+7@d?6mNJ5O7ATH<ue>>6Aj=5PmxwVov5Kz#BvfG1mmsuv25lu<=e
    sY0Orap7]jBTpV*,NUIV3rn]WiE23mG2WyUBT^jk$B$@\i5}<-VZ!nT}#Z?{nU,unvqA,j^V@A+1
    HR;)wVX]4}I=~7U7,-BJ[C{=2+plEmYIIoE5$e1^rA-R32DmHFI;oseT\rO>K[z$lWJ$!V$~j[sm
    *pNlX<;eKHOytQT,@W1j;1OxvA7XJu7[BI_p<PT9WQZmf+O\}DpUYnV=nCJ,$tRr-u$@7HO,ju}~
    oZ$OB+l5ECV$>7aRKZ#AKX5,[!Xpk{[oXC<Tm7|3,s7-7e2zj<$j?jC6^s{!#T*mB^]7J^zKY1pO
    <UTe3juzWQVAKC_isu$7zB[jllAY<w\7[?=Khmw}kXjJn5oG<#jXVYEAYl<j?wl#]iE'~zGajLj[
    7Ze#$;T<K7q]rZGi5,[R@CDr@CTiLx@+?=KRm]7?!OV=Z#5W^O<H7,Tw2;\Gw*2K1|5_X#5RaEZV
    ?#r1Ix-pmnK9+HA[d}^lsBJA$a1\_'$Up_r]KFo|rs@5\$kxQr=vaTT[ji<[T]}RyalH53,!v^pJ
    OvuK!S<TTrH'io@$Z~[[l[/0G/mUK$R<IY4AURp\+w~d1amBf#5}eKlDkk*YW#a-p}?Xz#s**}H^
    *z;wUTa!wm}-YruKCLYyjQ^D8.,WYTvlx{oa5<=5w-2.xAZ21-e$4Y$k+]K,+SjAe-z=_W5HYY'r
    Y,R_kj'a+5Y=Tx!535UXA54=Xj_sB#EMzl1s[^]7<GVZ<_#w^uIWt7xJ'Om7'uOWC[=\XUQpw?<e
    }K=?uo15aQOEwS1Go5Yl_zOD?$1WIsJ[l$}WX;S$Z';2{]$Evsjr2B[ju7{7iu\Kz,wU[$O)Dz[^
    1+ZHLu[['"ZBa}vhB*?>oBBa{wJ3+Rn1QG[mI_$r2*$n{xT7"BRu_$K]lznA<=pOQooIJQ1m](za
    [p6dEV_[CD77IiU?}{jvs3;v81\2aN5?a3][joA>UU3$A,=k2Zmjn<V}i2Q3RYACwG$i5J^,zY1l
    'ji<$iPRX\=xp<kIeAl=leXV=V=Xs1DBznQto^2Bxr^x{QruTVGYtkD1CZY3[n[wwk=I?,j2nC5h
    pJ_JTI2sp\r}?_+,^v3#y1->+[u}eB>no@A]'ZIi{GiRjO@,KWa}2oWz<$=pRdinUmQ;RA$ruAom
    TxO5wW2xz{0B>G<7K=<$-YwC3AoMv5-BEw*I=s1kQ=D1Y*!=r,3VN]'zWtVTjjE!xR}HoEQ7_{Jx
    9-xn}XpumNa+@se?!#<\BlJ]!G^?r*5]@Ha+uTe{7s=E\!Uj+OAz]X3r>B{rpDfxmWT]-}5'oA'i
    oCu9~rk[ra<[Qx<eCx,{el1;'5p>,cO77\1X*]^e2nl*@I_iHp\yW]?1%As#-IUQm';OYCJ+-=!C
    lju<]}-B{,#_Dxr'ssxj~AxHus7v@Iz7aCa[E}Z+R)A5*~B,aG4|<[#*w}i1el^\t=>jkF+'p@o!
    UT^{llz1nROq~UjBU}>K9[C_vslr_QEk+==$,jW$WMHjp$$=$xz~>WIT\j>D1#rA\@@a~WxX;;'a
    lOIslXVET-H_5T@V$=[e<OW-,rp!pG]mrj1]oZw^+}^~>'sZInIk}@u}Y^vT3'.11I@=rEA^HH$V
    _23=@31|Y}ee;XTv">a-Z3]~!B~JY2Y5Cd7=k$zd8[{'K;r~a
`endprotected
//pragma protect end


//pragma protect
//pragma protect begin
`protected

    MTI!#4Z]kw=_e+RD$>\}^>.>*[Q,wZ+vQE@oNN9>E"B1mw>$CWQO;[GjQie?zQ2r2@*72}2aR*s*
    G@fV-ns~{BBY6+1$'Q,AmOoXA31,['>KjrBj'_@-]Tl~nI^DU=V#m[opT^5^B?wpH6iCIU1-evB1
    iZ;OmBx7K*@E[7Hzja@UE;AVUE)f~{'TvX<[=G?,X7h%!E#ZXX32lH\,NxQ\51^+xOE?=GGT<D{p
    kk<l1B_m*#D13RA!!}VA}$@G<Bj*TCHW5fD=s_z+HD2Eisxpn\oHJ}a}BIaGuJ@Q\o].mIz^{VBE
    %l\Zs~sr%e>]v1>\^$B{^J5@^l-WW1mV[kjknu+^i!5rv=^+Is[,}ao{Y]#W=x<7]#Y|Y+@r3jDa
    FxQ#JeGv<<1{<CiC[Y7KXezY^Xlk?Ar;lpX2w[Wp_>+ArGl{RXj@e!e$CK$a,]<p7@&jHj$TGz\j
    rC@7Z'_*spImVripK$!Z<{*jA@kov*WvO}{{YE~qF,ZuRt31ZIM{UA$F,rujC@55uxI-;ps@7kvV
    v^1xlm~UQ_2H\\1nI~son>@r7KY];_\IE_z{BjT;O_}33H\UxU2AzjIknos{*Z=x]}Q![w=+v-z^
    U$;>^=~vsHDmU^YZRv$W+o<VB-,JQ],U^*|CB*s*lVuHEHG}~o,=15w=]_a-CQWO#HCrxZ7zu]#5
    }<<-n3aT^{nO\l==?$>V?H5r'ljY!<]2E*[r~EE2[531UT+s\W[IWDYGa\Rz7
`endprotected
//pragma protect end


//pragma protect
//pragma protect begin
`protected

    MTI!#K]O-a$Vx+D;@17\s\pklH>'pVwJBGZh7mBVmhsi>\8LA7'JGxA-}m1TjiRImzY7\h)QZ1EJ
    T@#vHARvjk}]irz!w$wIi@DFzx^QI}VCXvopoz!DN@'}#$e[AeUWURv#~dQi_#s>Eop?]HIW,BW'
    1_we<}Y_]VR}['TskuKUHOj_;wC$A_X=}s?C@UVQZG=5Dk\l^Bj+}^H-<usxXu_<,#G*1}Nzxu*m
    pB<'!pmlE7iAnvV]J]OL1UxQh2Vo#Y\euI?5?];-QxE;2?H->r\Iz-\sBJa,I=T^}YO*WiYz.Qn+
    !{Tj+;_<ne^R^2Y+.*?vE_H[s=Y]$ICDk'#<5kwU[7D]k1?,p@$UeFZEOx1>>wpRTr+UGJ*3j''_
    [WJvQ<;XU~~wZxB\E?V=GlG9^l*#G+^^NEY*+=(<-7[.EH$$V^v--5kGRx1'Y@[JQD[J,>*Qon=X
    >Di}~B13y[JBKiT~I#o+u1+=-0V$3Yz_2a__U!B-HmekurQZ}k=!DmiRUzY;_H[i]l1x!7\aZ,t,
    Xne=iG*R7X,Z{_}sIij<+]#_i<3KUQ,bqcI-IEFm5@'"2=iD<$$eXYQ2Vjn^=H<lD=rA1IkZ!psK
    3^l?2xTEYJ{n3ECVVh%9Rn*Ee2*7]2Y[O\T@1zT3!{p}CwYuG~Xz}m*z{rkw'YU@mvv;FcxjZnB<
    '*
`endprotected
//pragma protect end


//pragma protect
//pragma protect begin
`protected

    MTI!#}rp-Ij/XYk5IxD+r0;TwC?>Ep^nA}"}Z-s>E"B\Vw>$CWmO3[l=Fc&Z_~,UsZ?]!>IajF<r
    A#@D=pgaap<+1$'Q,AmOoXA31,['>Kjr:eD^@LTl~!,C>Y1+B?!{}u:7Jps|4xU{XnwoQGVH]7rG
    up2HvHjz+[,>11!a>ND\7O~<D$N[UT1I=77p!^@=XA3BnmJ@,v7Ia-TlwXj='~xD5XeO3Ri5\]_^
    V+k{[;vY3J};sO}$7vuFJo,jjJT\/-O-D!{D]pd%tUa3Yin{,[+~HXopG}<<J<h]EbKow'Apk#Om
    ;<E*}{dEn2oH=EDf$QrzI~o$W.}V32GV@-=9uUDaC#KpO]U#Zsj>O^_3rIJ=@XV}e\_C_k'3Y~{p
    }\$v<U[lBI>;1C*HD'HUQspzp2ZxV_lOO']nRW]#x=>j1xE,XRe\O1j^X[+C5J^7V1UO~HW@?Q?J
    ,*#Z1Xw${az#Vo5xUpx?H7##gzj@HGx[[Fq_UxZaR<uH1XlxrkQ1_#2}zlZH]fvY<3msmvx>Ok~O
    }Jlpl7!*W[[CGZVQ#5vQBK#a}<!e7x2j5KP'rx''z7]x5]C''+vI5sJEnwJ-{e$WQ?obhfT,<vIZ
    5KWe_upV-Q=*ivL%D&IDpUlzlQCk;'15;?I!w@u[OYSC7Wr1x>$o2mR"Y-eDIl{=Z,_J}jr=-OJO
    vjk,R'loQCY]|nQYA2B3_152DC1m3z1ZR}H5vsr@D&iour7A{$CR=]*TJkH\i-y'r7axz>Be{j,l
    #1~sIAuj$m,g)H}JVw$w;ZaBl]ZERkp+-lwmH/lQH<nOp],E>52rQ@*p[^j#>-dhv2op5<+'1Hup
    /$I32oH{E!VY<{Y;D1u7m,!7iO"TX1<H7>7i$J+_(X}p<?n1G\HH_{H^H<$<]}-CmG<2J2[D~_A,
    r|DOVWtG{Ej!'_>JX$j,p@$iI'{#1JQjO>maDQsQ~2ZI!7srT^@fdk(it*W+{W,,'5i5=r1?]YU=
    vWTo~
`endprotected
//pragma protect end


`include "ddr3_controller.vh"
//pragma protect
//pragma protect begin
`protected

    MTI!#L\r~wY*e=,_E@v[];H}YZD'02Q2Ji}7"=#Yih/SFExzx=or,.'e-k[B?wZB=@wo+<}Q;!3X
    'uX<+2U{){Ck;G$k\s{ErsSKwJUz^;}3[eHoU~XAlz@=k^^<[@BEe<oHE\j7vKve;}+IZ'3u]+}\
    Z;uzd~,UUHUVJ+l$_{X<]homj*x{~I$vX<KwCTDQ+vnCUD3X\#NHoTsBG{zZ=e3He{I0"K[oZ;j$
    BR,Gm7_}[aBRHDkp?\BB![@YnIm11OGO=+U$nB"[}XrTRz=sS2'+H_l#YADv][nwBht}\IUHD'AT
    Bv@EjXz"GZAuX}vB#asAl2voduo@XG_VKGXvke^1Al~ano5sk,*3G5\1B1V-_FET~>ms=puOVlED
    31osQlvwTv8C;_i<YW;Fe3Gl}zX$SH5W2u,rw):@xHTJXXxQDWG[>sC,z3U]_!RszEBIT+,IkWC?
    D#]u,t-BBO-U$zeWjp=De}r>a5vnxA}Jp<H'K^G\Hen'!zAzs{$Owrel^X]Il+w]iYY~,Y3{$[A[
    XzDsH=rDio__kZ^ju}6B!vlIEQK7K@]lVV*-wpX@vCl~V<Z}oDsYB1]7_]K><wBf)!rOv_iGDT[m
    eH5,xVYv\)L[ATXe$Uasz[TI![3Il#mj{aZ3*\r}B=VL|&[BTue#2ulB<D?DYm~sX'OBi@^Y^~[!
    }x,},<jizRaaCH?U*a*Cz^-RT]CI@1:p#v*Q^B\(qp~rO~lj_up1i_TO[-*I}Bzoi-Nyx-wATrr=
    :=Q-w$EW-7O^rM=w{!QR![E@@5r\*=HYTezns[q[D'KOs*'
`endprotected
//pragma protect end


`include "ddr3_controller.vh"
module `IP_MODULE_NAME(efx_ddr3_soft_controller)
(
clk,
core_clk,
twd_clk,
tdqss_clk,
tac_clk,
reset_n,
reset,
cs,
ras,
cas,
we,
cke,
addr,
ba,
odt,
o_dm_hi,
o_dm_lo,
i_dqs_hi,
i_dqs_lo,
i_dqs_n_hi,
i_dqs_n_lo,
o_dqs_hi,
o_dqs_lo,
o_dqs_n_hi,
o_dqs_n_lo,
o_dqs_oe,
o_dqs_n_oe,
i_dq_hi,
i_dq_lo,
o_dq_hi,
o_dq_lo,
o_dq_oe,
wr_busy,
wr_data,
wr_datamask,
wr_addr,
wr_en,
wr_addr_en,
wr_ack,
rd_busy,
rd_addr,
rd_addr_en,
rd_en,
rd_data,
rd_valid,
rd_ack,
shift,
shift_sel,
shift_ena,
cal_ena,
cal_done,
cal_pass,
cal_fail_log,
cal_shift_val,
axi_aid,
axi_aaddr,
axi_alen,
axi_asize,
axi_aburst,
axi_alock,
axi_avalid,
axi_aready,
axi_atype,
axi_wid,
axi_wdata,
axi_wstrb,
axi_wlast,
axi_wvalid,
axi_wready,
axi_rid,
axi_rdata,
axi_rlast,
axi_rvalid,
axi_rready,
axi_rresp,
axi_bid,
axi_bvalid,
axi_bresp,
axi_bready
);
input clk;
input core_clk;
input twd_clk;
input tdqss_clk;
input tac_clk;
input reset_n;
output reset;
output cs;
output ras;
output cas;
output we;
output cke;
output [15:0]addr;
output [2:0]ba;
output odt;
output [`DRAM_GROUP-1'b1:0] o_dm_hi;
output [`DRAM_GROUP-1'b1:0] o_dm_lo;
input [`DRAM_GROUP-1'b1:0]i_dqs_hi;
input [`DRAM_GROUP-1'b1:0]i_dqs_lo;
input [`DRAM_GROUP-1'b1:0]i_dqs_n_hi;
input [`DRAM_GROUP-1'b1:0]i_dqs_n_lo;
output [`DRAM_GROUP-1'b1:0]o_dqs_hi;
output [`DRAM_GROUP-1'b1:0]o_dqs_lo;
output [`DRAM_GROUP-1'b1:0]o_dqs_n_hi;
output [`DRAM_GROUP-1'b1:0]o_dqs_n_lo;
output [`DRAM_GROUP-1'b1:0]o_dqs_oe;
output [`DRAM_GROUP-1'b1:0]o_dqs_n_oe;
input [`DRAM_WIDTH-1'b1:0] i_dq_hi;
input [`DRAM_WIDTH-1'b1:0] i_dq_lo;
output [`DRAM_WIDTH-1'b1:0] o_dq_hi;
output [`DRAM_WIDTH-1'b1:0] o_dq_lo;
output [`DRAM_WIDTH-1'b1:0] o_dq_oe;
output 						wr_busy;
input [`WFIFO_WIDTH-1'b1:0]	wr_data;
input [`DM_BIT_WIDTH-1'b1:0] wr_datamask;
input [31:0]				wr_addr;
input 						wr_en;
input						wr_addr_en;
output 						wr_ack;
output 						rd_busy;
input  [31:0] 				rd_addr;
input  				    rd_addr_en;
input  				    rd_en;
output [`WFIFO_WIDTH-1'b1:0]	rd_data;
output 						rd_valid;
output 						rd_ack;
output [2:0]shift;
output [4:0]shift_sel;
output shift_ena;
input cal_ena;
output cal_done;
output cal_pass;
output [6:0]cal_fail_log;
output [2:0]cal_shift_val;
input wire [7:0]    axi_aid;
input wire [31:0]   axi_aaddr;
input wire [7:0]    axi_alen;
input wire [2:0]    axi_asize;
input wire [1:0]    axi_aburst;
input wire [1:0]    axi_alock;
input wire          axi_avalid;
output wire          axi_aready;
input wire          axi_atype;
input wire [7:0]    axi_wid;
input wire [`WFIFO_WIDTH-1:0]  axi_wdata;
input wire [`DM_BIT_WIDTH-1'b1:0]   axi_wstrb;
input wire          axi_wlast;
input wire          axi_wvalid;
output wire          axi_wready;
output wire [7:0]    axi_rid;
output wire [`WFIFO_WIDTH-1:0]  axi_rdata;
output wire          axi_rlast;
output wire          axi_rvalid;
input wire          axi_rready;
output wire [1:0]    axi_rresp;
output wire [7:0]    axi_bid;
output wire          axi_bvalid;
output wire [1:0]    axi_bresp;
input wire          axi_bready;
//pragma protect
//pragma protect begin
`protected

    MTI!#QBv=I7ooaX\B-XJ-{p\JeXj~Ov@-1O*[=ZlO1gyK]oaMAXWe=YK#Y*GQ72Q#Z-<3wE+$GVc
    3$Z+T|'JY<@s*KvK@a4_rpA1?!27?BRNMD^,\3U^+-HHxx7TJa5[[[#v}=:IlN:RD>zJX+#IHAYB
    AVi>XfmA$]=OTvao=^f|k9]3w~Y@eE_O]I1Izjn=r3>Tja,'?_+siUoR5Ak1;+Lp1*_qq1H}[_5#
    w(*ln*nw7-Is[a1BY^8kAH;xOn7Z'BeBrB_7luTLb3<-p<=5>copTu5^OH^WI1RJ*}Ix1u?>oKf$
    1111OYsslK~e*=T2$;r}lBX~]wjnsG~};;Zo\l=*G;j_=,nXQ<2K*3p=#W}q_Ku'c=$]k$I[@L\p
    B+[A$CvWOjC[j*Rm_Qxm[<Lzo,j1J@mw=<piY{;]ZK*<+'?~sJ$yV{-weHOE.o?$Q=]2Z?CW-+E\
    -rQl*qfr,E=GHx1M}_a]YJli_'#p[ZnB-|#*E3sA+Y-]InH{XD[oT7R!*v@U5-a'WQiXBjk,^>aR
    uk#YunmoQUe=ZGaXAZ)rmzJt]oBY;1=QEp3K=\'W^^$>HU_Q~x\{UxxWs^QD,C\EX1TIDr@xdO${
    ~ZOO@Q_eD=7CJ,^so*H_@.9rE-;aTTA5GUIp3n!aXU{*zD['apGOlI1uD*xWa,u]@U<{{B_(aa-[
    [$K{'Z>3zoXK[5z-GCY{QIoU;Tz?!wOl5=GE}{A,V[A{NTRpl,]?v]o_JoKu^,C~z*e[RoeRULz2
    X!GIVZ<73K0+l>1&1I}x'!^,wD<j@<^JZH3?C";}?$y7s<u,~THMw=w+un>KUY?TJnjWWO+z5O#G
    {R-JGmm[e^EQY-*V{}<<]_r^=*Qx[>1EB1TC+GBQ/B-OTVZ5@I-'poB"s'zp\3jOk5vT,V*]]y}_
    QZRjpszD5?\H;+,5oWCw-QE{Z[r;TC#U1rl5@T.5x?x\s>kQ*e;=BOv5suH=Di=YBR3$Apm.#Q=\
    r'D<8h+'1$x'\XT]~>BC-D^>>_G5w7AV[cWB]w{wwE-{!25+'ssE@=wU-n}3D#=5=WR_a^R;oVFj
    W3Z?U7}~>!wEO<p<*,!*Q-7iVjTY72!)Klu<j;D>sCp!-l+p31ArwaEwZ]7B|!ws=s7pKxzZ@;5R
    ArEpXi][1+r]s~Tll[_',*BDK+[COzH2u>Xna}ijp_kI~[~E>Yn,x4*nOZ7o<_^\{o7[1JTw<>mp
    fV#-E[Yp5+U\Yi'xpQkuu=X]\jwXJYkll_?$'=orZ(}HAYHXh<e[l*~JZ=TRV<X*->7zIQ^<mapi
    QfxBrQYHDD7O,wg}s-X-jxiQDwly2oOaVv3l:*pjWOjZj$AA}RAK\a7>;5$i#_D-#|5X2Hu*K2QJ
    +?Eo-lC=}{iCiD"K7*aqll?Y:KjI}.-T}ZV-Dksi5#E,~u@}*5vZ+\8^1vUusu=RO-3j\@m^VV!x
    RGTiGr[m5;ex3<Z;R-v~s$-pDTHl?2V[5<_$?ze'DO#w[}Ko'\VGwBEERw!wnxZvvUGoej~l=$el
    i,33e>nuR~\!}jCY~AOepzmnE3WI~$a-IKR+U~w115\>Ys;Y*_vM7r-RE{1xU5xuw,+=fv?B']?>
    @liK~_Ex{oe#H7x~nOYB57\U?wG=5ujm*ToSz$$_RG[R?'[5lus5<UD?lQaYt1'3-[vaO?CKa@YG
    or!!Gl;Zl^Ye}NIly$l5pgpUZrqoVYkAws@]aOW0E*'Gc3'OAjm-C[<r*#Gp<Y$:kTnEq}E}<wwQ
    GV,mO)?UCa<<p~*j-[Y$V[h2*T[H]$<I_3J*bd@\vnx<@Y
`endprotected
//pragma protect end


`include "ddr3_controller.vh"
//pragma protect
//pragma protect begin
`protected

    MTI!#+DJkep'rV\^G9O,=HOzAY$xiYVxx>DHu[q/B&:5Hh*xsx=or>gUE-[I^#Kek*@r,,?7Vz#y
    A7#H#Ull!r#~$!RVN^,]Eemp[KwJUz^;};<Vnzx#XA*K>o*2=!NHwE'0?1,}-emk0a'?_T=E+[GQ
    1raWAe>IG9=]\+]#sJ>DY717}Ao<p##7u@;jeo<$k$yE<zI~5rwY!_>rIva~YA;IGnaKX=DG35{W
    A5K_2nk>7eeY,kGQz+kQ'K#CT'{~eE;1J@}zZz#UEknAo#;VVOu]@}{KSDsCJmC\i|17]\[EvQ{r
    7HEmx=*];}}DUD|[A{?)IvQ#C{oGv-KOv\^Y^?aIcJ&K[-Z1XauwUCR+$J>roQ<xJ,m5@W[Tz@Oh
    }IikV[]B,ss\B#DQCv5$31DRu-p^?vaX+']x}5v;avx~L$;[025!a}7~,l~G7?lwxT,Q#vVspwAQ
    *,i{^3U_X?pmx1>pz^1DU/1vWu$A}-aHel!vWK?xnsesT>'VJ55AxV7X{~<*xu;5$aI>='U5AH'G
    EOs$W,U*[n[4kh'XRz\Tj@\_GBJU^TnO'=6L'Vpa\3CHt-[Kmx0t*2aZIU=1+R<5$HeBVZ;EqjgS
    t2UDR_'*kV]C'BDm+];zZ{C<e.VmIk7+7UizrT8~77Z^mTK3=$<pEiUlsIY*<7si}[WlTEu!wX$K
    }D=nOuWAj<lEZK#v-*}OV,uL]<!!HY$>~B!J[Hl,{xQ,-r?15$TV\ewse7UI#12*~j*\IVOT753X
    )$v}D+wW2@D,'jeiJT7;3!o#'IJw\m[aZG;aX9{U@@gJG;'5'}sma!Tpi}YlaV2!{+wlA3=n]R*%
    ^i';mEwa~'m?tI17>$3}W5HsT$^Z1Cs\xEZW;2}m5t7GT;[>,20n<5x|*siaN=#vrcI\@e.F\D5G
    mHDu6&=?]o=I;lfSpA<X{Tp@-T+Dbno_+Isi_Ke7mTV-QGu+lV@v$2X3\y;>5<opI/kEn1~ouKvr
    s$kz5j?+J2GuW[o]r@<B\R>^zAj'<]@D<]d;T^Ypr_E3'nRrH!D]z;#j;Q'lJa7W}_xJrHCB0n+=
    leWouQ2,mLWO[KB,usoVsK]*_iZ}mA?UeAjR>#R3s]vKQV%v*WJj,>JsT{*_wA+1VwO2eEE\7@'n
    7k#!-Up>[Tlc=XhZQr<K*>pC1Ej'^\w<j>ROiHoTACu'-YlNB<ZEV-Ao>xo=0IIDTTH}r;V+QDEY
    ?P0O_oKWD-1d5>!wI>ox{$BsoA+~2G~vDKG]Z]v^Ke%Q'}G7[}a5~IDO|}kz^z#zsLWUAvuw@ABr
    K1n}z*03s*;VBI!1!'CZB'AguoBj7mO_u5_p$nJ!euUT2-CBnoAX$]x*;}a\U[!uvolpI*m$7-Ew
    CRAzZ1IUj7YJ'Om-X-=?<V?sCupuZBsl*_Y{<_E~Qi;Ve}=+?,#u]fjvY^5+z_7iVr=?UQ^1CX-$
    *$2aa~};[oanDrA}XVIxu#7uZGLZT{}vsHx@>5!G\~K'?o^rw-O#^7]k,AlD2\$'xu-)EQKRek1<
    REkD&+_[QfOzRvB'B;D<uZ<eKaDnGwa+G+=7?=wx#$YJ![*~j{m*AA$zIr+5lpkwAK7=QaU1AH1T
    eam[KI;H@1G'Kaz;Z^1K^zZU<rp$p[s55Y[%;pm'YJCxBa*V$^W[xIe]I3wW'}\x$sX!rU+uvQ5I
    8anV2~>RxvIlrx\A^^~VQLbsx>?$sQ3V_*~eupsIIBe]hKB5Zg@C~wZXT*u>\2enQ$IasxIiQo_l
    ;<2},3CHVHu}ZU:}J]@<CZ,rk7o7?1i0}3RTl7In,rK1{p#xEEAn}AIA*OZoaYG;QT@XDQ1!@t{w
    5>IAH;,!5TA];~jj\-VTOI8?I=izj-3!^[HmI-<k}B$vAuQ=i!ZG,!<6aBQ@\HQQ8lI#p$-*--]+
    AR5X15I~lVCo!--2>fu'?Vz<ZZ=O;prwa>flvU?;Q[B}/B_\snaDGE,7Rnw3[%nX<}]33+wXmsQi
    GGIA1iYiVA2}K~U11l+D^$7>{+ZC^>$$[u,Ua@Q;Ik-}^'^'R<ow;u*ZomAYOw'A7KjX-e&ea,~G
    n;kao\#,z1YZseJs?jpoK,nxj],t9aYXVB;^apO\IFaQ_^Ep~[D;@+''-3~aW{p|T7E2Y#'}Y~G[
    i*7O7TO]YpW]1o[5wTv@Ia*EWITH7zUU^Z-5Rs]uQC[i^~K,V{IVlV[Bw>s[pGk2=ZZJs_KZz\3~
    ,=loDG,G*w;@UQp$Pu}pwEC_Bb]@+J?}TXJ^Ror~>H_2]e]k{@p!nuHYHrr@C1H5^CBvVsvI~~XY
    AuDQQKR>-Q+_EGur7-;'[na7oXaBz1[Ys;>[!;2B{@5kRmke!I"UvD~12[l*{p[[wC=FOk'QD~Du
    WpD+woY@jTOoXY}l,G-^<I+I_I^]zW7QV@Q_YiJ,3ICum<CE?^?p*A2^BiV2]C5+s\?Wx~Q*;[3w
    #vUWi]T]ro#Cd*T2r~CnuD31e$pZ\I''C7o3J{>v$~'@rx?{o?{2CeJZ@2AXvCJa=XCR,hQ@svae
    aWEXUG$+_\;oj*-I'Xu}T'',A]Wn^]sR\w<z2GD=Z!]YmUQZj3xe,Xmp-{o<w#1}o7]GTuKO{Uu$
    vuD_B7VnR3C#YJ}\+n9WTo$8[C_eCmJ3zw^T;v-n3Aa<%=H]@<-;<NcavJI3Oz\QpI!HrOsD}CWs
    eW-lj+l2-3XuU+k[U,-73VsDOyz$2Tv?+\ol7z\1Q=?j1{+X^[<nFsx;-O7I[oJ'2I@@s?>$iOn}
    u\.~HA}2Be-^I\Z-nAa@w\~(1OQ'-X_xY,!;lRr{_D!=EXAr^vO5=WzQ5DYa']i@lZju#{Z{VEza
    *HRWD>YIUsv7;]]D#R\\PeQaKwTT?YW}*!C{-@QC~e<jHgolJ1zABoV*eYH\_i=<@'=7TZK*n,i]
    !IFNDRDvelCH@'uBKT$}{1T[{'aQFbK[JK0m\!a,u{w$ElVTo}O<{]xvR'5o7EHIr3J!RA@E^zAh
    s%kU=x'5U*Ivp+~I'E-UeD2eV3rCs,nUR3ITmY4urBmPqv=XZIUDmr[]xlmT$lKm,T}O-Bs#_,V$
    [Bs\H3OjG+x3r+HYk.aU>!kwA~Y>l}!{QjO15IJsZ\S+lDxn'\#mDs~!Rn~}1IDv,UBp@;$IXj{1
    B{EK\#m$![El$=#2wWTYG52*$OE-]ep=I#+EC@*[ICn}*!?@,Y'1o[pY]~xezl+t*ss1ljmuvl7o
    +skmQv~]nIJ<QAvD([@X!0Y\pmKC0-R1U]K{1pJ$Q!Q-V,|}G^pTI}R}=s>R^HDU]Kn_Av=TIvHP
    ,Vl;^#$Kia_\jjv[o$v{T}I-Xaa@2sJ5KeIYJD;{ixkDDzQsHw[^GU7ZKoJTIe~WQ>pO\XrVn,!2
    slWrL${O]RCGox',[nxaA$1DEkBIal{]r7K7E5ArJ+ew^rJv\RoYC|*OB{Wx!7=\H2P\Dil;EV\;
    *Q{[2-CxI5^TR!k'razDZ3Bl\r]1#v*#>EKl3<aBC5]?RiI"*$A-X]H#QRuao[DJRaUaJa!ao?w1
    }Qj=[*=l5Wo]+QKIR@&]aY%r+mp)I_n~[_k\]\meur'eR7>,IYmsW=v77!Z-=CHk?Ba];rjH{5]k
    JGZ\eAoJQ@U\Bv_^s!$x7GmeWvQleJ*]47e*7ZTGmXne!'}Ow\v~r;[R+~G2o@p,#X+C#VYn?EwA
    <pBR=kXHDBY<er1@JEd#s@{2+Xj5K1X_K7Hk'[sfxEO5r-pYEl@R-Q[<B\3rjC!Rdt2[JQwAO?5'
    pQna{~<\pJWesC)mD<;C-lI;_{A@OO!b$ZZE2+=?Azz5X]#Xb5ElK_Tji~';Zs]~]JjY]2R1uD-D
    5X<$A4R#vINeQ5D-l>~Hvw=O]H~x[Iz#e}*5DzT=#Y'AriX^Q]k=0ms,V'\#[rZ2DUXY>Gwn@?1W
    z!X~D'n;lZU$[dlu1rN-R@ehfE.]-GTHBY;EeA}l*<EX\ikVaz*VZo{{v3^,<w}k>rnUz\H]7Av[
    +-np{@5B5vo;Cm^<5zeQs1leLa{aJ%xkK]e\1GY^oU\TJwA^xD[G7vj27x]{V$~Xa{>Tz+*{K?A+
    _r&CnARF+B==u-luKsX?m[k>C7w]v_rK+G[kV*w]ywIr1o~<e7;[#p]~7z~B}LCv#+V+~<-soCcd
    <_mU]x!!&;<oeBVGHL)BJTYj57JQ*iJBZK3k+IU}lkYhp}Yz{CBm7m]K,zY[nIo3B*vWG2pIzp}1
    IwZw#YpQ(Up=J1R;\R*X'AEr<YUvnUQTnb;^7'KDn~QGU#O"7THwq\[j^{}rBxGj$5pQOD}H1NKX
    ={*AuXHA-Q\3}]7A<#=VXY*?'uBK=H=Q]UH>sp/9Z{>jQ][w~R-_}_G=pK\-o#1Op{HZ=VDkTQmu
    e{nO^#jU![5{v[BI9[_QoeQj>]Gk}eUY>Fw{[v;D@Z[WAEl@ZDE2umC2_ap+;Yo*G}/lS#G?!0'X
    }#he?Qs\XIs}C#2}B>~;As@]#lYVmu>'Q3w_-\w21*D7?~Z,KI*Z,z_N~|1I*1}$<-ATorPiH}<>
    E3aJlK$\C11$GI^m^7AdkCU-C,HZ-[1uAD]ILi$a#pQGTG$kegelk]s2-lT]T!Zx$>r\[}tkjV?V
    su;>E*ot>Rp{pv-*lk[=2h\~2uYBlZfY$v7K]3@pHx_<<!oPR]2e1#Yw$H2T1B;Dq#<\l.}a=ov5
    i{vnvjBH\+pkC@<_YsH>w1>5uveQZ#jzmrO1?,TUe!TEF7_;Z3Y>a~$\^=5?$\$esk{JTCJD3r}u
    oS{]o$KA=JZH7#-Uzra'ur8IW+YGHwE?_*kTpTU!'e<ju^~{G[,UEOBB\i2$Cs#?ABJ''2]I,1lo
    k~pm5p{B7D55AO#{UT^_kHr@=-lG~\1o[Trz]I[:25_xY{-2eXpvB]=>oI*lOvo_W=D$BaO*8=oR
    n,z#@dDV$kGEOJ#^\\^E'7k+}]J+WKox@{vw-Z'IvE2*jJ&[i2+Ri_H'A[A9u=GelrmKN0}-Kkvm
    ,T$z,5'+H'3e_7U7#op=^!4Br!*OE@])=r@AG>xs>eCjL~_=wZzk@'!J$Q%'JQ^~YwI!exTR[H~#
    1s^sQw^X\Y'O{ArB-Jea}u^vx~;=#[#^d~\OE_msw2H7o-]BTL=Qrpo_Qr_sZu5}A5rOCJlRJn$2
    ^ZTIk+up2$Q?*G8KV,$C2^Cl7-WW*RnCJW*EW>>%Rn~xi'I\~zB<rpKX{5#$pmRe*T2;cB*zo>'W
    GC0j*x]/I7OC_zvj='>[sV_>;O[<@XnE\+Rl2Q>>JDs$_Zn!mrmWWoIUjaE2<GpWO$AH=XV[]i+e
    E\Gm}C2rK]kl2+HooGuwJQ,w\ReGv;EJu|EW{Br3^'4#Q_sVDx!B7$@EKVXaOEulCGe-r;]a_^>d
    eu1v,[s['?$@j_BW,WO'N\K^vi,X!;I?a{Es{3sWG5+GkRjRpds+VQ'Z>T[#[iQ}uu>vYzn=[w,j
    3^xXx<TUelulEow}[UP(X+ZY"O!EuIiuz}r,$[?>7j^A#_@Kp@,^n]nr{4nY_}0#AQ@l]G5T]B]G
    ,TGlZ\*CA,1^O<zoYj~6lzs<Qw\Ua_<1Nkw=AkDJ}woFe'#_}9IJ_ubcYjI'[Er7o?Yi$Bx<D$Er
    %]2=A2nB!jv@?TnlKj!XIrGBesExxzlEJp$=CYlCBpe#>Up7Aw{m'1V;^;Qn,v>,<>]Y!B>o2>BU
    ZrnD]Y^O#ex7]lDj'E>D~}xz2L{[+kr!Z]OAn^^2^V5'6mrV^4_}uYb&W[+}7!3kUT\~l8C!DDor
    m7L3,$A?DJ#Rk-J+'n]@YorDQ-1su!j@RCi1~nUQ]7sQKJ_x\m\1BA]E2;*TRo}R1K<Oppmi,,R@
    v^my0es^k@TBW%^{!-rRp}.me}*s=+OE?{'Rk3OmR]eGOAC7DRa,U+UYHeYVHlVYIDV$j3Wa^RY$
    u}$k5iwlKJ7r_Gk_'O-!<ouuR-?[7mXjZ*VU}1xreW=D3-*z,ZTaEU>O$}U-B1]1U2Ck<z{jkCYx
    jR]Tve}rrTV{U_sBk5?\jOu}iQ$Vaw~?Vx*{j]R!zzv+5<X-O5uCC@,"@}i@cq#j~DJx\5fEwmZo
    B,KeHDTTO~?}\QirlDvVB7Y,xX]aHQRAYQQG5<,zeE}p#wmQAEaCG@EdM2}r,}^z<O#xuG,pkUpp
    ]mQCvx#3k~=On!=*jDxpzNNUXvZs7J^t;+p[q{$<_[+]kvo-uK'=,E${;GjnBw_Knx?,@17~T:\D
    =Ge@VvWD9^\R]b1\HVO1X=[YpwgeAB'KpwZae3+H7w#x@l7-aj?}}^-~]uCB+Vu{lTA$maIxI~Q3
    jv**MR}%TenKv[x#
`endprotected
//pragma protect end


`include "ddr3_controller.vh"
//pragma protect
//pragma protect begin
`protected

    MTI!#l,_AY1_wwQ;w4lOIonpiw|n]Jse*T\x"[fG]?!7x@[[Q}BavOn$nf\Zp73s2#I-UEraWVR?
    WO4X[+2U{){Ck;G$k\s{ErsSKwJUz^;}M?xzzBvHv!'_,~*!\-X+2'hO'^77A]BL*ZBWyzUTBl3R
    =?l=!$O#+Kr2r^TJ1yo-HKv~p<}!<I=#*l['jwIIl5zh'1C~yB^D!2$B7#E3T}DjGvn'kIkprx+<
    #7*^^*Bn>OjQQV{1G8mSAnm>I\D]G7izZ}\z$-s5Gk}W,T{x7xeCmsDk}kRx7#e$^HzpR;=_iH[Z
    ls8'l7B7C\{lE!QKXaXsXJx]TB2lQ]^:5EDZA[{1t"IEa;UzVw7Hdk=j<F!Y2{xVVYFobp7>ZOBJ
    ZLM$=R~m<5P>Xn*c0f?nU!>aTZuj<3?7D]U>XUD7Ez+D^<BDwXq2<_X!}kotUo{rDTxiIGJ>AHE{
    O5@~S#o{OVmG{P+w~p1kTz2j*3kRap-DDQGI?u{lkCAH[]!I5[[?)5_x3#v_IiUZI@_G!=7WmNCK
    XxmQ{zZBOu5lT2#j@!~=a}>GRl~C3T#\laZO[AW}3l-,ZoFlGp+[DB@GVEZ3''TEJ[xiOA;]sQX?
    ']zKAAE"$x\~K57Ol\DeIu[{'mr'p5>_(_TOz<7^>B5UTiG_Xj#z};5<D>R*z$=#o?,V3mD\#H+@
    7n+w{Gu3Vv2pRKY={spBGVao**oxwQQl-%'xepUHp<fh5{@lCU]X]jv-I{Cvrs{oU_nDE\vHrk\;
    Rw_D1'w~z^TQJvzWwj22lenY>vn~G1w[J,2mwv$$L5UW3;>,Bru;C#=2l!TKwhxwEQTGmsxDCB*|
    ,\s@c}'@|asDz+zO=rTX@sQOZV!<?11H=Hjvs/5J-{iB_-dR1RUdU}VnZ}EVr{EpE'[~YQ3m!5}v
    IO$=HTV~rCW5$_7www2O5wXk\OZHZ,*U3UwkJCI~_jT[y7\CDA9"ir-7z~G@<woHe5>p{Y!?-TWu
    3$pD#^J]eR!l,p5uVJO@d~UenB;I,?rT]?1-e+$5G/WT$Z^{eOx?*ezil$O[?OlwjlorHCpJ^TX<
    ='*rkWs{~Bdyk+Iul3s7je1{3,[VG+w\<+5jvo?>+EZ<s#we]ROv1KAkp([J5jv_j;G3]!9*zK_w
    x=m]2]$\[YK5aRT:'}]#|;so[n{u>XaJlT]!k}<t:?{\78^5*oOl11x{XzmTQzC5Z$lK!wNu}U$L
    7\I,}Woz<zIW=m+,IVZpr}n72EQEVCX-{-\w@Y^[J*E\n}~W:mBeE8-B7un*i#Ijmo2T!s{$j#>+
    JOsu!zOxlT,]XYH'_vQ''\,UOIw=TT*wY1G>5I!j!^!w>oH=iBAw*x{l?o>=01,{o|'Rw=}lWRX+
    2@^OwjJ^511<O'pQ!wIZuVHj@DKr<3(5@{WD5m25^m~BuZ;p7uGCs<v;j>IT^D+oGRrO;K5zR;G=
    5ooKVK5DHI,1^H$W]ZC+sv@<,Es*Z[#Qjx7oew7lBkTwHE+*r[H$]A]l\uBU^,lsa]@{z5}7$s!l
    [11fY+;,)Z$V!XCC$YDBaYeQQpH}=Bnlk21i$>>![>}+>^_n3<6)M/!DvDwXIe)]J>}I*=Z:[;x*
    TREe{<3<]1iUXvJlBs,WIJ;BRo~ai{YBl!1*avI^euIi@E\<vA^H~wl_}o\sj{-ow[a]ajLEm<pY
    \OonB1*aHn=Kr?2~'GZYPRiJj+BlB*KO;|1npr^+eZGNp#VH3Dj~nA!o@t*-B{,=A>dW<nxiH3{i
    H[lY7K_PLZT!kpB]iG<}~w<'1:+E]#I\@3x3ej^,An7b27njvQSIpgJ_s$AY5qr_R5s#2=i<B{$?
    CA'$]?sWu]3XE$|aOV!w\7U!'xkp~'=>wK{v;Gi-<^+_~p@,U>WT''{A^G_es;UK}Zv;<2e(,;pX
    a$u}aOz]Rxmx?*>I[AE}rQTBmA*5G23'H^>*3<@^pwl]*=E_/!wuRpKplIWjpf3=]7{CjB_rWY}\
    5AQJBE=zJuk-s1A[\_R'^[*>V@K,I#O5$ioUCz[wI>sf_]?-Y@Uo+_mHBWS3>3lY^JQo~11x1>\#
    +ra[U-@=3Ezm'*-@O/E12;T>s=s\amw+P'5wwj@j}<YIi]#Wl_K=Ug=BaDIae,f*V1s"'Z^nHp\+
    }2+u\B}3h~>Orq&njHk}m2]lHJjC?W;=Yp$^x!DeIUXEWVv['/wGe{Vw!Qm[z]aHG@Ko3@eJmEKX
    IB[WDp2=,X)iUw~SU5HRV[BwJI[@jZK,)R]?aa[I<R2!3~TE!~O#AkzUleKVk]"Glr;?'lH$m+{!
    j#r_O_z$!;^<eCvVA{^}pw]071cI;*{5sOUm,K$RGwG+G+~O?,eixkj\@u?yuQWwp]e2o!**sQe(
    cU}{XYG^3_tMuwvKKU]!RT{vRn;>xpz?{}7T_>pXI!u=W{'HX7wuBZKv\CVivpHJ$B#@B_Kl1wOm
    $w2,]*O38gvpH7pkG@7[#Eb#_?n2^DBd+wOp+s1E=<KJ\'{-V]3>I\jE#D[u,Ww<fR}Q\B~;]~Tj
    \T*#VpiA==w^YQu+U&(]ar[M->o~?$d-<*u#Tum;RoU>U+rY#QuXsBCV'op'vCJ2Xl\7WE+$e#Q)
    #C]$l~@oI#QlRWD!l+\}@<\ZE#<?V}D!^!YR*OK*us<7#XYJ/<Oi*=-s'S\uH]QCwwaxvxpDK,VT
    znflG^sCe,K'2\75sAW]e5re<Zm|u7']5p=[QQVT<\zn(!\m]yD='!p'DJenBpx3u>@,}7Z-u[~X
    aV'xVRYAxzqs[B]Qu+oE;px\j=Qd"x=v+{V3D!RDpr?wm-Tn]1=T?j<eHw[Z_wG-eH'@R@oBX\rO
    ~Vo}5v1[BRo]Yv1*r,i>RDDllCz'~Qe*_,r$W;Yw{Hp^?I=_RU[BB#oKr-\_ez=V'3Ter-j?\3<Z
    lG7w*C/k=R5uYi5@Ri$$xYu{=oC];HW|'v~,+am},GzoxnH$ix~E?E+U<eGTG7wB[s>vou,@=H>j
    Bvom9z^+mx*j#;aBl_$<U!$@vuz>K#w*n5(_CC<B7?X<V_H*<22H[}^^7$3{}6IVH-m6D1!',zY{
    o#IZesH$J=\[3pe;<_n_Bv]A[^[jK'1~G3!>X}D;MKG,vuD@KQVm_W73^#5-CX1XzrriA7^rT>OD
    =QI!$D%@xT~S*J!Ix]nZB#7Gi<_ZUYaGrZvG'OziK_,>U,-l=H,-DeQuCIIHx<+a'frDYQ[e,E,-
    7RD!;jv+IXN\OXn:Y_YRc.JVa{D[\Bazlz:eE[3w,*nT<_$*?mw@zYTCJ+>W1~oj5=ixn+wu'H>r
    KHQ'#Ze7kDje_U,?l@>+aJnv\TZ(qBonG7JI~JQpaz1s$,z-ITTDGw1nrjKnOn5~'HVo2UVxux13
    !r\V,=!1K]j?W5'rEB4Yn1[\*JY$w_;L,1l51F"GT*X3BV]Y3+JxDl^,C$s>Hx$[c5RJ}M,_-<l~
    Y$x7kmlC_H1B-Iuz#sN];Xo<o2A.#6({l=<s=5Egan{[,DX3l<7pYYaV1l7kG}xTrR\5_w,kO5AX
    ;o3-.t$-$px<{KuBum-G-,VsaKm<CU'/vY!,>v2pi.C,~jY<VOx@jlj]k3o2>J5iG~Hre~8U<}Y{
    =;Aw1pHD6IejXuo'jjKD1OJW$#*2\dCBk~a^iH1l\]Q1Zz;7<=VwT\oJ<nV1<scjEeW1n^pTn!Ve
    bAwo,]s_o+C<1Z5J*JYZ2[sC!,mz#>^RH9N#xD,i[+vCu5^K^+U,Qp=l#Nv5$<3E[}%HpO[H-\v]
    s[1hI#B{H1+#;QRB$m~\Cm[,k$=[kR]Hp5Y-=x\vb65H>3|>{vW2'Ys$E'~]UpDVm7'$sZ+CW,\u
    jo7+5OH->{QeOOV*{pZ<HzR|A>R]WOa@+TE@=>Uw'spQv2ZET-Yo5wIYRYOi_e'OR*@_ljCY,mY,
    C;pDY52nAIE3KT{7r#>D$r@-1sl]GxY*(1vRlJU{Q[Vo{\DRz5b^W-DU+~R@rp[-^O~aAl^v]<Dp
    ~Z2jwQHzQ?=CHl~1vvlN"xw-=RzQ7>RK_Q*$U-ETX=*po*!{r*JBs>Bee%7'ak]]pDkC[T!HHAe{
    x3o"rwn;}Y++aGxCj{uH,V@$ZwC;1m<G*Z;?+,jORioH$y'E<TK*5z2+~xGXwBJB_'a}'JR*v'UV
    C<6K<uO^?_z^O[=57}_MH>{wrHp{m7$C1*,r^QUG1_Bx%kRlW]EoarKlU~\U@na^JoSf1>E3HO5p
    _7{R-]^u3'?lVGJ]pxR~QG[781Hxmf1{+Ty#w$>jI}*<^Q>=!KD7WD#EB,J-Y^i<QREx;r5vvvTy
    xsi^5+D!}_!5[p-oYAn}{}D=fvZv@^Z;_Dx-vAoJl2YV]S2\k]H=}ZU658#<v1Do]C_W+noo$>2I
    \ox=5BejBC>-l@@{*kEurij+$j(Ee3X=V*sR-[R=#==kCYCsa$VzT!I<l;{!+2<[-*Ao~XXeU$=<
    1?E'n;AA^5[RPxW*7etBks,Exri?$'{,AYaaEGp,*5zFvOw*sU[u@^I_nre>~+py/]Ge=VR7[A*{
    GTH+v5JT@ElX_K-Y-AG@p+zRJ]$GoN$2>5LaV7l{T2p''T*a1[e"^)799jsnwi'e!X]Xa{8!NYZp
    }7a~#e;o2kw}$21m~'kH}@VB?<EYlL<s;XuCII'J1C:Rw@kVWOorwUY"?j]1QCaVxC@$5rn@_+*a
    =$2}W1O]^uxuVo7+qi=Q<xu<OQ,[iqmQi#}*_-C~GaEEJ3V[oxEk=$EUD*PxKnxYvz2HIDl'!Ukq
    $n~nFQEIQ*{KsREY>%|lOOkZaR'hL]m=em-z7WeITwjRkYn\2X*w-\;m=e5Ro)Bae3EB@53Vxj{\
    A=mv-_Z^<=qKruIjl73H<D>H{TJUr{>AYIw6:T<B5D>3z%)0RlpJ[VB5BO7Q1l,?Q~A-8jpuo]W^
    5R>;+,;@=s\HTWROuEEksaR^1v=CE>]CXx#+Y{[r$elJ1DUCUQ!<@^~5npXA$Y{}^C}~'g+>p!^]
    [l\G^;iz',exZo_5R,it{|J[}WjOjKM}ZKl1X+=DV[#o}}K=Z]=xQAHQ}n3VWqGR3BEzDi.Mrl2,
    TUCAwBjA-,UwKoTR1QQCkR{}JYO>k=5G*oiD3IA=HX=R\k^B+Bi-m\~oQB3!I'wCJv7mI<mKn5rT
    x1]@EK*#__ABk'o{;rw+pxok_5+A,aIovUV@fU'~=lX^+{jD<?G@XYsV2.QlE+^C+EOXBzB}~CE;
    ;K39oU[!-[!I^UX7_xwO72z1?QIm~XI?h=<~UBQzI=z_m7C]m\+'I^L_]?3V^mrCQE5kU{C}rirE
    EE5;]EB5[Y$-o~H+-e!HIQEq<XjOXYB+T51v\XHZp[a{'Kl2eQ[pUev^5KeTD{\D1p\=KEnn#}{?
    Wza\VJ'~'51*Or{mE,1,:KaUlQ$n#;s@p\35IA1$~QcX^pa{73?joa]D~[3Ir+l;<]j!en>7Z\sW
    O\>-50G=s5lHYT^_<5i^+YUHe,1r{,Jr~s5'jAs'YY!=#rlk>@M}Y-s,=_5}?JJ}CZ*+a<<6.&<}
    DznVnlR'k1\G_D+>7$J$pr,uKnTA,ja{<Y1,Blolo52=G!u5XU42<VO^sO26qma=#p^Kojrx>QBu
    DHYiI#lC=Z}DRIe=Y7!5$<^1'CA!ERl7B5X]jWU3JrEn~KVsOko<Gw\=7R$D+?5W*@$!5O5l!Ou<
    B^Y[unoJzjZx~,XAWs\U=!x\Vq?{'3S<},l7wJUY;,ZUIZ?}TssSXxu1a-@;KX;[nGk2^#CHwX7$
    }k5=,JI}|E{j'3j5W+>j5$W>7kYEep5UQ#sm1*nwrT$>Q1-<>9@sW}@EU2A_1$<e3~uvv24Fipno
    G~VA,BEr0E}#',G<*jYoQ6I{D^,[r}KAaaIQ@l[iv[G}7;#jZ'G5I7^GRO5J[IYw{UruZvoIIiH}
    zw3-GjTI]ul}muR[^ZCiE*1kv@oY_KrH[ln$^2/WX[D!nJDGQW{oOnl7}={^R-oEXX-ROE?v3\5r
    nHaQQrA7mH\JTWr![-WrzO}6AO+TW[\7Ux=TNB#+R1!a5x7,+D_GC2_=eu=sOx2!pi>QQ~.'G}2[
    !><5H*m|Dl!4U+vQzIWkzxB~*@'x^UIi2I]@A]jQ_]~A2>ZejY+D'vXrAx\,sXj*sQAmTTUsjX32
    eOJ+JTokOpiG,B7JeUQY[,J>KxeQG{=2}@X!lEmV+TQGPDr5\k,'vrVjv#R~$wGXpUoX-uOun,wm
    CW*Tm5kGXY}$viaC+=XW1a*RGXIU[fi\?uvG?TI^$<-pp^*{~e6|$EjI4]s>kC{}*ruV{{7O3E[-
    Y}!1s/VGQ5CpWEz$U$U}l#7#=]6k7iYViI7}mwK{|WQ1lGz'QAUV_"nXX2+zi_Q(]E__0$>+$5vp
    e]R{vkseQmC[A9x=Iv^3[_{j7!W$zsX5U<$pXV}o<!<V2x(<'{7z3}<T[+;0/qsBTB"5Ykkpknko
    CaG2+pas8t[GxpKhv!K7]?JOI3$oes}vTj~G7U-s]*T^e1<T^_]ri=2l1{=~solQwwU}E]CY.gV>
    AkoQ7=,J$#V7{WIU;-@XO?OeH@]AZac=Y#7r#Up5OO<nep;*1H[(uluvp}[oo*'QmQYmBEnQXV2*
    omI?}/<w~U,Qor5o~5nT3-\vHAQjBj~>1B\e^kQT!~lQ#;Ae_<%#T,Ccb[}vE^Br>NreD\,a<@RW
    rEP$z}JjjK;3nn@2am].X7A,Y=k5#_sgJ<E^5lpXZ]nA2_uWQ!Ka=jokk$euEr+]#Va53XBjvkX-
    O2lQjr,,n5*3M1IkjiaV1~^_,L!YioLDGa]*2s,=-]kj+XsEwO]tI^#s37]2U^{1vBCH7{QKVjQ?
    awZ[=lK[aV=\:{5Xr'3=VxuTTwDCiTr5^%,wwJD_<*L7e$^Iar_]jlw\k$]1kI'p\E\NC;RU@[u{
    ^Ar^KC1v2sB53r2<iVp<9K\T^WGEp[]EkQ9soG!2Gisfj;oD{Bza]}$]n7v7e@-eUlVaiUp_aGE1
    r1\YZriX1nU~RBJ\/QJBkCRj;eA+A5EGix$nT=u$G$!Bl7Q!'Czw*oY,wi*m$W>-U*wG]?RBGQ_~
    Kb%4rwY$#v#TJ]uD6EVWvQC+<8Bi7Oe3Dj#nR<ls*$ZV1]JXnH@*a$<UwUS[@3E#jzEn<~HW*1YN
    }R}}v@G'.^RZu2vC7A{37=B;O<O-7f^'Alp7@]-p$sxeD^m1w7@5\uk<^$EQ![,p*mYoI]>}xU3Y
    z;Rr!@cpiOG,,EGU+p;kHIj']lJf@{nRxQJHIa;E'1#-rKHT-v^Wmv1~e7{~Z*<w*@U{\@W-[;$p
    ;B?[T\?aQJ@>cjun=~CGIrmm]rJHsQBpUl{W[QxaD*o\#]@rTH+v+pR@ze1T\#Eo;-TYZ-UlpHRE
    UKHJ-E<oHPB23ELTRXUKO7Og>O-5okepJDsVzaUU2XrkZo2_e\~nlAG!oil~=aHCspQ!=wYv!-ZE
    ]I~]-z3l"$A1r_+xID5loJURG]eZ7u<Z\2aolOU'2]!*KuA]~K}XV@*V$/&,1T{mHlsnhGO5X5[r
    [_r_1Yv2s*5A+PmI<n57<?*Vv>puQE\^<lATDv3{jv3G+n>>A_D8Ko+Y5E9fT*@X1l=^'LW}nWDY
    IG^#Ws=A!WEI!#O-ZsXY57e2D^KX@+$2xK-C7n>IsIs77^s,7{oou??qC5BDKa5K$lk'bBQC-YUR
    ';Q?r<-waQm3Q=7pTn1o*=lzE^#T>QFSZEnQjiwuR317='+=aaIHO[C^:sB=w$#1xp*TT.]T5]Hw
    mXCuKIjr<YOX<2O@H>=aj+E;Av.OwK'}s^AB$_AqTh!z;?({R+eBEIX-[n5OsIQZG>r;5{5oDAEm
    _ka,x{R~\+w~oKK0#j_j@\H[/Je7ZCJEHzn<OavVkfo,rB,U1e-S&/<oMI<{[D;Xmx+$EE2\Y_pm
    5\B>K'W-wxkHO5WG\u'XTc=aV~I^{RzvW-vk3!Gj@!ss}>wC1;*7Q>pD]U{BaBHp5j#w^!5GX[EU
    ^DU,Z2ruC}p_3Dpur!Vi3!uOuuB[p,IOZ-e5Tj2G}u5mG;7!EkYHJkrvlY-X{vEilXl>^Y=Vjo\_
    UxWG'rxm~JRG_mVG@kT{QZ'Y-xs!U?2jeemAKw#BO@VwB@XlB1GDV]$aBEx!~og12Zvpro2xzxG=
    _-C\P<7aXIol[vN.MDQ2H}12{=1XOsOQ!7sSB*[u-}E]3x;XX[p#'osBB!@EI>o7,XE'+[AO^nWv
    E2'T]=3ve;I]lnxG(T_vK^[v?{xYj*3R2>_7'1+CQKo2Zr7~\%=]urm7*J:,XWpaCp>wRsk^A+o\
    Q~!Drv$(YUeX^CZ5RQ,=xQCW,>+$o@<}~]\11-,r3v}\#5QOWzVV7X3u-r[;;Y\DmrOrQKpuITz_
    XeZG<rDr-1,!pw!r_s!{}}-GWDBJKOXKG2{1;+3{I3Rxl3$C3'\+QV7XvrIp,re1eswX?<-V#9~{
    vXmVB+'$rrxxR5|{ens<Ho^0Yx\?ps?Y$~<JI[W*y*T^,Ck]C\UwB?vlmr\HYCpxmo{;GV}]Hqe]
    s?a-v~=Reu,H7[Hx~[c]qZTUXjEHOA__Q~VE<z?!}J[]55^;7Lur>-n7x,dGoQ7Ej]5D@UOV1r{3
    w37B@Um[x'^}W7=O,nJvZ-xQOH^:5w}Oz<C,-UC<BjXH'uuB^u^wQl<D7w5,al+lTw+1NV@5$KTn
    +*l'@^{up,xW1DOX]v\u*kYx$}oJRjT~V,{,sut_~XpJz+Gowe{w5Oz<=HpWG=K>Ha$'zv_,S>AB
    HxO7]eGnKIT{]d#AIn#{Y>r[{JJvBsAo<$_IC#ZC,Zl{jYM]';}-+Z,;5]o;A\?IM_YU@1]wVanZ
    V_vXeH^LDk}=!jC[m=iXI\K>aVlT(9BrQKeZVKjO}?ADnGA_,m*_zs;TUU=Onz[<a<}u^3H-Uk*2
    ,A<$${.Dmp2=<@5~$kpL+[j=U7xAeBRZNe2^2'){xv=6>wZv[5_]B*oR1I#$*ijX{57]5+]BBpjG
    l=?DAa;u@<'73}KQIJ;wIn>I|yZGe\z@$,zxonO3]!a,vkOrw5=?=Q6YZ~<awr33n}2]1$RCYwm_
    HoDU{eB#'+UQzlHe=^KI{H_{TBll3eT!-G[E[rkO\W]JHQ~_5-a2'3e#a-'^I=BoC^m{BKX}vXk[
    _zKJ7+1KY#^xHGizmR<2_?Z0A{u]*-o7Vju,@oo!#YnHr{W~$zXm3_@rEzEG,QlXr}-++V_BUEI;
    =DGuZz*i[?@*U<{~VR[#m\BWrVvKQo@x5Y-xli>+,vsQm=owG{o3T1OH;RsK\Ya[~1pZ},2p_=Uo
    C-Cv*^U@Ko3C+eJAYU{="s*z^J]]JemnBvun;=^K3<>17Cou*CJX;~l[ARH}l}_;Zjxx!rr?J;E,
    l"$U{zTzsUB<V'l2n_o3~;o2UrGYQ!B>1KMkoX@$u,K~}o;JT~ecs>j1h8aaK'cC*'vnYGj>\Y'G
    sK>>7jCi(#$+e$Aop_Dka1URzom>;wxHV\}kQlK{Irh8-'n~aIw++Q2^lR;=da=7V[lRlsm}k1z,
    ;%w]iI',ZuIiUZir>!BG@YRHUOX]Cl>AQ]|kTx1=TXw=wx5ua1Z#+G5o+\{8D+7knV]U'OEvCu*r
    VGCB@TH<;5X]NHwWo!C{^HIBOi12v;Tapy8E7#x}xBe\5AjI5WEoTXQuGw[TpJ@yH=j1!L^YBVE@
    xjoYiC,\R-<1UZI@s3s\mYJn]lV_p^={-!}]#KKalX[e^]Vk_'^On$)*@_JRj\*2XveC^7Xz5!'4
    o^n}J5XrG+[W?TYp=+OZyYXErHH1^'EawJ-BBJD*Ko;C}+R~>D~v<}W!\R1-<MXeIERwXj=w-JeJ
    7?jzl1GBa^C0ox#G~LB#$?Qa]Hcn,QG_ts*u!$KU?XjEZO>Xl\Q]]KT^J<eE!4*O7',GZG.rIR=I
    K2B/q@}@jG<7$gRQA#aHp-EB^i0,ZU#;pjVR<'z=K!;[${}pHx[&ED2_[~3,W1#$o8[3-=UjY{Wx
    +D<>eWCCYaDe$pk=;e';Bz>lz>>Cs-$H\]R<$VErs}XO+!T=@\Ra*lMRZ!UAT5Ha1jlOQu~1e57r
    B{+W*v;*iO2GmG[jimjkrW[,v3m?B=wZv$1Qz2eV_V>=1\l;R$aQk-1_+,s6NO2D[2*zDA[px")s
    mO}+R-^8|>D[?V]I,(zD#2lqv7KQM*vEU?YTBOEUv5[oauo2^{eu\ETv!'?Il&r>uXjrH#^rQQW7
    QJZ]?,zEw[2V1xGAK!pRp@^a5\VaoHEm8G[?({N!-X7BK'H}EJ$Q$}luX_]{Tm[;5ZorzKAmvTuQ
    sj$emQ1\+auzUTp#CQJ?zYi%%G2usozG,$VQZr>o?)AEa1*$7}nwS0L?NB]uUHw_{JU+eWonOvvR
    Y^*'vy6H{&@p][Iw![NKU;$OOZo$C-mz_?\1,,ZDeIYN&9)lo2^7uex_{~z"GzAawVJ+p3jV}o'V
    sU[R7ulYL-R@^T+]D5;Jax+uA,iHVV11RhtZXAGzs^<pU>WlnJx".nr$!UwZ}le^3=s2IUzBKXei
    [ej+kY!sT=naBRslK7YpaY3H1~$*Er9Rrlui$<2;E^**TAWD3Aw5qD2Z{Zxw}G?zR,sp21{<*D-D
    ~1\3,N*@*,B3V7A>o+ImC'=TxRH<^i[Y#klw=uC1Wzun^C.sY{="\@na{j<EUGzs,u,,eCap7l_~
    4&UDYpz7e!-jIYTIk]).9pR$uk{Wz52CRI=pG#zaavZuTR*[#Yy$oevwrD7xi+u]*CODosv=RGAE
    Y~zCR{{PdCCe*,]$_]Rw;U[a!&zC-Er~2@+ID]w_<@HQ*\CQ~s?IAQ^j*ROGj=z-QXYi>O=j[^+E
    BaI++mTwA^?_VaD+p-eZGUIw'vD,o]'CEUxvO}TvX!~$^-paBEA]X#jI,=av-IJC<BQI\O}W-E-G
    I^12[2[?IKw]QWHe{p|r\5@^WrmpnJzzYZ5'=nvQOXI]HYO'I!pjKua;nK?;^,}b'-ZrW,+{VTWm
    HI3s}k~W2G~XFjwRCW]QVsRK1?HJ]k'CEGa2uI3mU5_,lv>Ep7Q<w5[\!2Awu}~_u_Q+\wO~pXGK
    l5zl,[pu<[o2s!H1s3al}wVnnt[i'DHD*Bo}VJa''2'7{+}rp$Q+DRJs_?xX25BD=+,\=$x\uXG_
    Tz=&k'wTOX;n]B,#'=,>[$]^x2v7k+*eEvEoRRawm<[mT+A@5[Q<>{T~R_E}X>u*'^=KA>V-5-Xw
    m[eaXoxV_ma-]VlwpC3m>XeA2Y##U'AwRCm>wz=]pD,@JoeUe~Mp_OJGej<$#Bs;_?$1O,]M-]7r
    @j,KR7X@'=??aI@=BKx+C?o^4*!HXs@_zx<>zZT^ojDmX+r*?e{A21~E,p$EVB{nWeQRwY3TTVDA
    ]VBT1ns-v;IJ$x^pR<}map<[z}KYRU\Q?O7O@y}K'\~7AjO#@pl]\T1lm!,=E,A^!nv=BI=}{A>C
    }<\3as+X3[^C!Vz~5TMa{]e3C~,n[Z*IW{UNS\[lv2wln
`endprotected
//pragma protect end


`include "ddr3_controller.vh"
//pragma protect
//pragma protect begin
`protected

    MTI!#ITGB]mW}w{ZwIUQ@w[^?7Jl5QU>Js?]a7~YQ'r?ay!5o{*xCxj?-GplBTNVk3O];jT=i*!_
    E}H<TZnp;,+|EfkQ'Be-e]iXa[zx^QI}VCX$jOvs2[N~'THlwHpT=zU=VGK|!RX[c=^+s[!Ge7#$
    ;2ppE<zOo=owRm}--OoW'Wa@@^B}JrGV!6Tj#C]r{A=u1]k_7Y~j2[:7IW!s>nw\vQTZh4v;-p}=
    xo#Ez]rC!;mQC1]VxTuGsQ7C0Nrlja^\XB]=iOsAA]};w1$ClrElu5v!Z^UTUGl3+kG'A'|;,{-J
    1nYvxu{*a*$vR]iAI<]B3!uma\sxDTe=rAD[AGWB3*pn-V#gT_'-NhBK+?-s3U#XW$ID[Ylx!BW-
    K<A'>>ZQVwBk<[XpaTzX@O+1?Xenwv{\YG)qYUok_]Q]OpEX%k[Z~$m[H]G]QUn\U{<KZOu3WsU^
    27e=Uxu1u0o[T!#VRr\2@n_{uG;sO*pr]_3VjY+EXI}?Q\-z#u2suE)I(4Tp{2+wnKoOs5[sBlQj
    {QIU)KE=7z,3romTW]ovaIXXV|!>a{x&'+V^U<'?LOCrX?x$^pmT}737*J<Xo,z@Y*D]'RAJr<n;
    3H}3wUO<\{,w@O_!v'w}Cr{D@r*5lQ<E1.dEmAA{7QAB_wU\*m;72IVa\z[mH}{]^GuBx'$i5\,y
    n8wRnlX<^31u2s=Y,s\kFX,HO)BJ!?x3V{AR?CA]-!<}+u|&[AsE!=3[j^kRGoCB_oi_A]pQ$VV@
    mrel.&&bFOxR<!ViIDvW*7;*$YX*WAA3jtGx$n$2}QRuDrrB@U8c+}QQ$eJ~Jsk!=#{TeG551Gl=
    7jEpjzknGn'T2\zl8G;]Xlsi-}2+?MYIi]>V-!}klD<'uQj\BjliG*-j<-^EmI<v3JOIJ'15i31A
    Xslawo'_Z{;11'sV?u^EU{lTe?EnpDP1ap3Cs**3G\r${}m_+>3d[DW]O\'Vw}7$snz;,\QGhe2o
    235{<;,R!H5}-^XoH>Bu-yue2G?enK*av;G,\-XAvnQ\WD[\#oImsnVYB}:zGxXev=1lClj?AQx&
    3]TkvV[Y,wY1[eRAkNkH\;C'sKbxjYa=}jY[TeH2Ap*U+z~'$v*#'im2-^KZ-X@#R\jz17nFKn;<
    {'<vImjpa}C=!CH'_GjkID}}onOJ-VinzvpO^Vs?@_o76!R*Uu\7x3}I7~<C1d\Io*lX;v5-v{4%
    \x=}2$k2iT2CYE{w[WReQ[AEB2-IYWJ5RI]zGR-vz55oo3xQI'isfi*l-[ZV,TBvwe;w]UYTfEA_
    jCw3s;xG$#YJHe\-Zp!~#Kjk}[$<RGMZ<>Q8ul<sq+YeY5~=zI*Z?HX\T{]XBJ<mJ[uxJ_w[X@$H
    7anp!$;xQ-DY;e+BuGGIDYnQTv[T2^ERoV;*H2OR>jr>}i5s?r7-=*k3lGnKjVwz\lGAD$D#u<TG
    Rz$n=xVa,qDe$K;}Dl3B\'%'XpTmRKQO@AulY~k$@E2Py3Y}x;[?Q*_3wZQ~u1?$>YB;5}G#m]ap
    k[GJe,A([E*v&o,Y{>vB^lB$^nD{}9sMkp_>+-*Ou,O,pXJuNo3D<ls5pusGsGQ57HwA^+QB$~<Q
    \Re?Kx'meIewRR$Q*Y51KlOk<iX~EVa*^jQ<Qx1J3t@<J<jau{;z{A,H53Z{Uu#ou!~Bloj=uTxQ
    wC'T}=QCA=X'{'aOBuW6;]JVBk$jiU!vaRWsu\n!u[X!EYzYC]s$]\@E!]~mTCQw3Y]AIO!D;\>p
    VX-A<_*Ri}-kKsI[ll*7^WenD?+-rB*j2IrIoC[GJYZI.~z{B{$C2<]!}jm1OH(L5T,pJ[_BmxAx
    BCXBe!O<lJwX'\B,15Xuf{OA!!lX@*1@@7tkRppV2oH#7*e_*~rW>7$x>T\C-zU.cRJ,@D>'ja^\
    }$px7*!lliB{o5=~#D[s]u']\#r+_E]#nioxRrJZV?r7[91z${J[akmwounO\+[i$eE2E5@*#JQR
    >1YKE_+_G,n+oD+*=Z2[Eiz!5K5ZH#~Xl@Ea{$}O=Xwr,RA_Q#cP]35Vk5<[V,ElCanQ>^?la_'@
    IvRZ4MD2{v{*+C<lX=kXE$$WvBxr<~3pm]rm,!9@<\D~52nW$Qsc#w1u,Yp]*C;R-RixIr>j-$5o
    8;}TwxIEe?T~#$2s{z$O!UEi}b=JG}aERQ^2[\i{U5pO3Ae-C<Y+aOzGw!$O>s*Q1VH>-RHo=wDH
    BoZ1p[<7Or)AB#Q1O;KKI-3Ml,u#opBRk<{2&(I;WC]J=n=ie,EY~o7*?G[{[i'!+7S#]j2sg=Y'
    HHXm3n<7$s+AQK=ZUR2=s5ED[clo!{i5XBX<JCsIjEr_m-)>A$V|_DHY,=KEUGj\n_z~c4UEQ[Ks
    C<qaw5w{H;ooO@*!13TE+!)r*3s7ozs0;,C~hY{W}1EY-o\JD@Y<2$}@xz*2u'Ek^\\@$RA3onap
    J;*7CDv-2dlkZ,WC*{s[7Z5=BzV!B<]fL9I]_\V6ZCoOEBEAZ>[I@^amDAsGt*X<AQY1'pwe,Ng}
    !oBjTCANB>7V=7kGI+~#zEDj~Du^^{KU:%,3K^HGpp_1D^{QG@2^[e_Z,<<\?U),{\?2BBoK+HlH
    xlVvGIepvK{^a73rT<35-Z]U_[\,m*OsT![|Aw}BVsD!D7YwW<p~e<KuDKn'(+*Vj~D_ul@2'M.v
    A;j5ZB76Qa<>EKuUxrn2RveeWpYi^3AV?wsR!D~,>>;XZ[;ER[~<iE<1=H2v<Oxo^1~HiQupFE{;
    Z*_u{cv'\Wf]!mIk'I=D7]'?SpU<j]^!aY+~TU+BaIr*i'pzu*J=Y'z!Et}'}5p;{,pvkj[A]^Ys
    ,<$n*mX_$Gk^7G!l]w;o7O*(#$EZYCCKd7\UxXHD7H5;~;Y=eEa[{PIa7a<_5_}#O-jx*^oC^HAr
    {ppV\^ja}3$xl~3DXjD^!p<,oODT=UWok]i<e{]C'v9=B$Rk<wOa1\KBl*]A_7m~l#'e[^oj2mBj
    s,z2QIlG$uWvA*{!BEErQVJKQerlJ+{v%l1R7C;BTU,E$<DDo{oun)urp-'QrAzeZ-Z]p?rKQ2@+
    =uSCH]C25KAIll+QE{?}<[-!-~$HQ]@2sO~erC?V>+'GnQR,,'}D*]1Txn@9ea<p@n{G+^@70u'{
    G]TaE~H@oB!w=x^-BwUe]ir3O'{Qo^}<u]oG-E!;Y#^<Do-J_'^B@V',[Ol^jm[QVsYwQO?;nLm{
    @Blk]Zw=l<l^zQ=D==l=[OVD<e{5^B|LcP[c[A-Aa<[1f<'n7#_;^y(xxvO%DxYp[1e_n1*{.'?C
    wqp#}#~xKI1^AOI;l>D5?jB!~xH*,muxR!EBCje]TG[5}uZUOR3_\Y'~~#oe-1x;jp1~BR/cY#Wp
    J[ar1mTK=;>^=['XzQa,^X'~+}CoD8$T^Ae'!T8AvT<}?,7sB!s1E=w|^w$RK]DG;(6Q\!pr:?RW
    Ip(O#A}Cpo^k+7R$kCHUDIIs5I{\{nmWEZ77#C>'[CmYwYs<p3O,v-?}V\Tl$\Jm1*#*sm1v{Brl
    JU?$r{wlw_pG{r^{XK5'w@_ts@lXB2[@}pA<xt2rBBXH_'7@[5}s#ZiR*\nXwW!o#]-VgRpU\IHQ
    \YeBICs}5{rm~R]JV771p,oa{+GY}=I$Q=nZ\TRw!oI_iI?<A,"jzI*]x]kA+AsL~n,[$;JlioXV
    _T>'!$O\Ir]<&m]E=ulDBAopn:!sm*#oul)}<<wIHvK#Ap<f7^?J(dWQ{~nr^urv;_m}Q_=&k5uk
    -U=,+5$vBEa[_ZT^+Yk;2<5sT<Z!Dgus\XI-a!j<;G!+}<v?jXDDQZE@!T2E5ITR,K{eRG3o__uY
    uDY?jT<H2IE,k}eX~]F-[nVp~-T7E!{v;mAY1ZB5,e>@[?@JxD-B+n'ar}luQmwY,Q\L]uOHUr^+
    ZapJ!=*msrA'J12_$s+D~nr1TT7m+eim6?T35+l\w:p<oXrD1*GH+<hUpJwBml!jBHwaoR2UR{XD
    vX!).<Q@$X'l,_wK?>Y}*Q]ROqT]}<<xA,1kAE*O5*^>>}IkUkJX;Jn*[pKaAE;rY'3OpjX{^CoA
    o{mGOzLwa[Q<sQC!AsB2TTT|4QQ,3C;]s]=T;o[lsHGs~w{Dze%1TZDC_#auOiX;rraiY'K^"H*]
    e7HO}HY=T3XpGQi8jz-}_jjo)}AY1^"fznK@=vY@@D!mKClm@>>e{a[Tj^ZTR}1AVw$=%wY*ko3T
    ;qsm[2pJO3#}[u@aEYDE=~G[D'hmn1HH}*mvYXY]K;Jk=5>pr~'Zvr5YQTWYOz#i5O?\[nu@alCK
    suY#e!I>I^J_xr~usRW^@z*0BZp=UDAaKVs^jE^@IkTHJNQu[,~rY7z\k<s3$='#BT1k=DCk{e$=
    $~[;@-]\7mQK-O:1oAn^lExAY\]}G\a@$z7<*T^I92zn3|e=Aj}*_~qJDa@@O,-$uCnnlHXXQ,*I
    ]rGxJV~$W'u?}a}"l'+3vX['G+EzvV-e$ekBr=k}H\3@bK*JuX<_#?Yrv{TOA~on}3jTu=Y?VG-$
    iko\u5JYB<H2@lUuxfHvTm$jHOiTm@P[VA1]GY?N.Rw{o\}aTnERK'hXR@AQN$1-UXj*!L9<oTkZ
    >ZuqnA]KEeJ]H'?!V]CWKL@E@BzUUR'5EoAr5EksI>4=v?_@X-u;]EBA[5pKav!-z!z2T<\kCC@K
    5#AX&J'~UlHKn3[zsp,{ru=7,d3>*?wa2j!$j2rv_o@5VO--=Ae'A<v#WnJ\e<G=?us+KWz7*aBp
    \#:Vz2~o7\HexW_{_*K{ei'IJlp]33CIL~nAv*o!}Cp$#ROm5,UETeCeCCB@*Yj={?={2Q]Ym_wZ
    2xBwWRaxlW7X=SJz3I!-!D,J,7{lAzR={=jFww=_r'Tm}>X}CxlVH<{m7\#Rl2*!X5OkiVukb2A{
    pUr<]*[F:*zJ[CEzrH<W=]1#]JnlvUHu7
`endprotected
//pragma protect end


//pragma protect
//pragma protect begin
`protected

    MTI!#vRU7XYZWGu>e#Ap*H*#@_ZHQGWmY\3K'N9,H1[C!K1Wr*;OvkCpZ]v)vf-ei;Vm<x7K7Uf1
    \@rqC|z3C[EfkQ'Be-e]iXa[zx^QI}VCX$ovVOuVNWr}XzRTAB'YUj+^[iU;pv&om]YLp7'wv~1W
    aT92O'<,eAT3wWA*;-5_=z~[lOB_YxZ>VuT,wu]U]Q?h[Q#Wr\lUg>RV,iT3;ok+XuAV[+C35EXr
    EA1i'&eW@?;'H*}!G!~aRxe]#so<v{]C]n7;aout?T,2X{>ZE!3V~nn7n<3H:rAZz}Xs<)1H57Dj
    <CV5Gu,WXjWrvww7l>q;_2<[p{[5;^5T1u!^7C^<XGw]~IIr\[3c!<>W{&=pT#I;@CA^$<_KQDr3
    E1'_xuE]i27vjiNhG"ujyiDj7R'VWR[mpfarI]F'Z'rJj[@N]i>u?eG]'-_\3_OGYCU2=Z[#J{!p
    i5NYAv=hem'ZYlv@IXX<J<^i**Tjr\C+!53]C2=ib3I\nH5HU
`endprotected
//pragma protect end


//pragma protect
//pragma protect begin
`protected

    MTI!#2_'O}YHoip@$}rpG2z!X&2RjBvxU1BePN9>Ek$GK*ax3-?QoI>}X=Zp/t2r;TCaTa6<1x,A
    wOU<sk7_rPlwJ#*+[[o_n=['CW!Ul$HUlRC[HEIMUE2>-rkT;5L0kDm7-+![i[/sQw17K;#'Oxj*
    o3eN6p;J,msAIO=zasD$p-ae-iar3WRuC[O?k$QKW=?]7Wpx?oW>e$Cp'<5V;u^WIARzEGTYWEq>
    T[[<nUC,O;GlPO>l,+T7;2CKTnRJYP9!&!aOT:D_,U}_x1lmzrVa~zVCl1u=vWx!p,Ixa[IKjmrJ
    +@|#A};a&9n7+I=l~D7mY,[YR,4E=U=[OoZEr,o$*,sZQnD7]u~f<YZ\5UQxYWQo}!>Ue__rh9GE
    YTCYo@YK\{_5BWgY?,K{<ZEBe2@j~Oj?YB^%/ouU*lZYJ'rA57X>B=&,<XCH$^[E;O{o?p1{Ou'm
    sD{;rYHu{D^uR-[1a(6,iD[ppWAB_'Zlb0rY\n^{GZ
`endprotected
//pragma protect end


//pragma protect
//pragma protect begin
`protected

    MTI!#R@r*_m,+P2I<IR?rXccljj~Ov@-1OrW=ZlOAE"]m5w>$CsE\37Ba}iyQkVosj}Y}IQ\x53{
    #]mu7-Hs~{BBY6+1$'Q,AmOoXA31,['>KjB#ox-D3]5#32jR;v\lIm|-]sG$k*KSA'iUC#VQQzu1
    q2=CXEQ^~~woU=f(i-w^Cva>QX=\Q'Bui-[r^?p$~s{nK=D_d1?1J1_@!=+[e+DIl,H~;<[C!aD~
    -9,#DJ\<@j~C]u$KV5AD\}Q_xl6G}}IX<QxPxG@o}A+W9j)EbzkKa[dsU,@3$,[!wnjrRiwkT5[[
    *<k51[+fN(7i-#ZVRn16ppi?-*xQu}+++Dae16'@Jrv-*J>1kG\~ETkA7],gRip'i5(Gjk!l3zaj
    l5z=u*@R~E2u=o#O^O'+xB_*E<!}=1ui'Ex7I[-o3KTn9=E^jw$U,FCxmUEs$W1!QX!YD_Ra*7<U
    z]]nCs,IY;VR?QX1C1c777paHYlZ_p=D$D2vTn[j#Vx7kv?9Eq,VYuRaxlxz<w^Y]WR>=?lOr}!5
    ,RZGW1YQ~}@'H<H$Jm*E@A=*J<?GQiv2Z1_\@RepZ]QE]AQ#Y\]pru\VNn-avzA{<Go\-<jeWG{X
    Z7[D21-!uQ,'D{zErG;@*Q\~elp2+;=Y3GpKs\?AoXa<pr5~>G?uWfxzpi!x-,2nwJ<p^+r@o+xB
    w-c^O5Xx3mJ+ps;RKZXe7\Y>>u?V3H~U*Gmhre1]yJURTvj~[DV*Z;<1]015]$=\Ql[?w=2w'EE#
    YA<VeV[1-JRDHB=Y$}[?~Y|F+E!CET2HaajvGB?x5u*#w{>~JCB],,2*o~;oAz>U!Y,Gx]Bi*U,a
    T>C=3RA#EY@+Y_uu|etxP8wzBO"3jv]-j@vK=!H\[I1~]x^}\}?cEZ[]|Nk+_I[1kK8jrW<!5#,v
    b"5[[@zfR!_}47$A;2DB'e@jJ\\Y~Z{K?*"-{{[xj_}SwUonr*V@;R^AeZ'K+E?\rZwWI?J^lkj5
    HsZlFRsTp975ETX}cBj_R6Q_\=aIDl+jiAWNH-p}a<B+[@{Hl>}+e1pO82jpGi<l!2xG^l'A-L,U
    ],<\,lC~>3Y[*^v2$]i{oBUYvWP\Fo;R]X1Y=V]!?*-X;(OG@AI%xrpanjI~zr5sD_YTDXJs5V]}
    7+3X$GU+[DYkpwT!]leU_?H2,,;Il\>7o^wlq'+KZzsV5x+;+0*325-Tx~}KY1|''H'az}Ao$<!y
    'UawoeD3zZY_Ng/#CJ\]V<~7<G,WR?@p_}se?lWuE,$]?$*1<7uxewKBj=Ul{A$2+<pW*_JceU}[
    om+Dtn=+CoUB{nju'gD5D,=o=IReT}35=JanG}3j*#i'w#;Hva!UJnBGz[sCmQi_]2x,sni}KYGX
    n}wU**lO+$5+Ej'#IQIG_#UX+eoell\3DAvslpV=Bw#v3EM75'$X'o+\H=V1*J[s^]A_~Yx''-'?
    ]-Ez-HDn^^*i=w@'nmo5jorx'*k?7<!J+~GtDqenu]^v!+N0[[Gr1~w~Ov?=CT[pKoev:P$[J_Ir
    1>RsQ]@tQJWQNz>@2pk=rBap}a<!oLW+x^,s3JwU=[GC*}D@3$GE^ZUC[alVkT'KVDMYB}^${o,}
    H5QoDY}^3amvs#G}3pvJG<<KY{vcEnn~-C?saUI@-5{+za_@jVW\Yemn?BJ_bvn$#Y;7roVOl'D=
    v?RD{I2s<7~l-X'iGGC{@?+~][O!]{p]V;{->C~J$~DxAO!{x!=C,+jIp!n=G[/#>'-l^2Hld$}p
    >}G\=NH=#CC#QGotFS2A3?ZXYZEa1E|$CK[trA-!AzI^6n]}I;OHB}5Tz=.gEXIkoxxBxwwDwXU'
    UOOnWjGUkOe\xvC{v}mB;C=UmUC@Rs<79KXz!W\H?>7<>me\1eTU7-zQHj+5R]we;JaUZ{X{^vkB
    -V#}78C[5e?]}'I!@[}5~#l}5Yz>,]I>{vasQBFjQmXlQ}TGJOv1J},m5{<w'\I\5]+*_[eDQCa\
    Wrro@n}6YXHBQxGIO}Q-<o+{KjvRom~Kx}YCgIw{1*^A~3a5$]JAOHl7o5R\roI}z?eQ_QWms}+e
    ^s@pULB+zEe57?FJwlzO]}K\?B}C$=<y7J^-plAo,DRWG'@5@{Oewwu?p\?wY,aoJr[w$@-Je1zr
    l+ZlwE5_,vG\kT-v-eDuk<o3BaTAKGV?^?G*k,r<]Z*~![rEa]@=ZB~#2}W[u'e[/9us^?'BZV7T
    u[V~{5Y'=AQA]a)zC~*}WTY}~Do,5_Q~Apsj$RkUwRQ3[j@1RsixZmZ'V}U-D*WIkU;=~E-1~{J=
    }ZzZ$u71OO]t4s[k$rpeij\Ej~XrnB[i7]7vn3>pv
`endprotected
//pragma protect end


/////////////////////////////////////////////////////////////////////////////
//           _____       
//          / _______    Copyright (C) 2013-2021 Efinix Inc. All rights reserved.
//         / /       \   
//        / /  ..    /   simple_dual_port_ram_fifo.v
//       / / .'     /    
//    __/ /.'      /     Description:
//   __   \       /      EFX FIFO
//  /_/ /\ \_____/ /     
// ____/  \_______/      
//
// *******************************
// Revisions:
//
// *******************************

module `IP_MODULE_NAME(efx_fifo_top) # (
    parameter FAMILY             = "TRION",       // New Param
    parameter SYNC_CLK           = 0,
    parameter BYPASS_RESET_SYNC  = 0,             // New Param
    parameter SYNC_STAGE         = 2,             // New Param
    parameter MODE               = "STANDARD",
    parameter DEPTH              = 512,           // Reverted (Equivalent to WDATA_DEPTH) 
    parameter DATA_WIDTH         = 32,            // Reverted (Equivalent to WDATA_WIDTH)
    parameter PIPELINE_REG       = 1,             // Reverted (By default is ON)
    parameter OPTIONAL_FLAGS     = 1,             // Reverted
    parameter OUTPUT_REG         = 0,
    parameter PROGRAMMABLE_FULL  = "STATIC_DUAL", // Set to "NONE" if not require this feature
    parameter PROG_FULL_ASSERT   = 27,
    parameter PROG_FULL_NEGATE   = 23,
    parameter PROGRAMMABLE_EMPTY = "STATIC_DUAL", // Set to "NONE" if not require this feature
    parameter PROG_EMPTY_ASSERT  = 5,
    parameter PROG_EMPTY_NEGATE  = 7,
    parameter ALMOST_FLAG        = OPTIONAL_FLAGS,
    parameter HANDSHAKE_FLAG     = OPTIONAL_FLAGS,
    parameter ASYM_WIDTH_RATIO   = 4,
    parameter WADDR_WIDTH        = depth2width(DEPTH),
    parameter RDATA_WIDTH        = rdwidthcompute(ASYM_WIDTH_RATIO,DATA_WIDTH),
    parameter RD_DEPTH           = rddepthcompute(DEPTH,DATA_WIDTH,RDATA_WIDTH),
    parameter RADDR_WIDTH        = depth2width(RD_DEPTH),
    parameter ENDIANESS		 = 0

)(
    input  wire                   a_rst_i,
    input  wire                   a_wr_rst_i,
    input  wire                   a_rd_rst_i,
    input  wire                   clk_i,
    input  wire                   wr_clk_i,
    input  wire                   rd_clk_i,
    input  wire                   wr_en_i,
    input  wire                   rd_en_i,
    input  wire [DATA_WIDTH-1:0]  wdata,
    output wire                   almost_full_o,
    output wire                   prog_full_o,
    output wire                   full_o,
    output wire                   overflow_o,
    output wire                   wr_ack_o,
    output wire [WADDR_WIDTH :0]  datacount_o,
    output wire [WADDR_WIDTH :0]  wr_datacount_o,
    output wire                   empty_o,
    output wire                   almost_empty_o,
    output wire                   prog_empty_o,
    output wire                   underflow_o,
    output wire                   rd_valid_o,
    output wire [RDATA_WIDTH-1:0] rdata,
    output wire [RADDR_WIDTH :0]  rd_datacount_o,
    output wire                   rst_busy
); 

localparam WR_DEPTH      = DEPTH;
localparam WDATA_WIDTH   = DATA_WIDTH;
localparam RAM_MUX_RATIO = (RDATA_WIDTH <= WDATA_WIDTH/32) ? 32 :
                           (RDATA_WIDTH <= WDATA_WIDTH/16) ? 16 :
                           (RDATA_WIDTH <= WDATA_WIDTH/8)  ? 8  :
                           (RDATA_WIDTH <= WDATA_WIDTH/4)  ? 4  :
                           (RDATA_WIDTH <= WDATA_WIDTH/2)  ? 2  :
                           (RDATA_WIDTH <= WDATA_WIDTH)    ? 1  :
                           (RDATA_WIDTH <= WDATA_WIDTH*2)  ? 2  :
                           (RDATA_WIDTH <= WDATA_WIDTH*4)  ? 4  :
                           (RDATA_WIDTH <= WDATA_WIDTH*8)  ? 8  :
                           (RDATA_WIDTH <= WDATA_WIDTH*16) ? 16 : 32;           

wire                   wr_rst_int;
wire                   rd_rst_int;
wire                   wr_en_int;
wire                   rd_en_int;
wire [WADDR_WIDTH-1:0] waddr;
wire [RADDR_WIDTH-1:0] raddr;
wire                   wr_clk_int;
wire                   rd_clk_int;
wire [WADDR_WIDTH :0]  wr_datacount_int;
wire [RADDR_WIDTH :0]  rd_datacount_int;

generate
    if (ASYM_WIDTH_RATIO == 4) begin
        if (SYNC_CLK) begin
            assign wr_clk_int     = clk_i;    
            assign rd_clk_int     = clk_i;
            assign datacount_o    = wr_datacount_int;
            assign wr_datacount_o = 'd0;
            assign rd_datacount_o = 'd0;
        end
        else begin
            assign wr_clk_int     = wr_clk_i;    
            assign rd_clk_int     = rd_clk_i;
            assign datacount_o    = 'd0;
            assign wr_datacount_o = wr_datacount_int;
            assign rd_datacount_o = rd_datacount_int;
        end
    end
    else begin
        assign datacount_o    = 'd0;
        assign wr_datacount_o = wr_datacount_int;
        assign rd_datacount_o = rd_datacount_int;
        if (SYNC_CLK) begin
            assign wr_clk_int     = clk_i;    
            assign rd_clk_int     = clk_i;
        end
        else begin
            assign wr_clk_int     = wr_clk_i;    
            assign rd_clk_int     = rd_clk_i;
        end
    end    

    if (!SYNC_CLK) begin
        (* async_reg = "true" *) reg [1:0] wr_rst;
        (* async_reg = "true" *) reg [1:0] rd_rst;
        
        always @ (posedge wr_clk_int or posedge a_rst_i) begin
            if (a_rst_i) 
                wr_rst <= 2'b11;
            else 
                wr_rst <= {wr_rst[0],1'b0};            
        end
        
        always @ (posedge rd_clk_int or posedge a_rst_i) begin
            if (a_rst_i) 
                rd_rst <= 2'b11;
            else 
                rd_rst <= {rd_rst[0],1'b0};            
        end

        if (BYPASS_RESET_SYNC) begin
            assign wr_rst_int = a_wr_rst_i;
            assign rd_rst_int = a_rd_rst_i; 
            assign rst_busy   = 1'b0;
        end 
        else begin
            assign wr_rst_int = wr_rst[1];
            assign rd_rst_int = rd_rst[1]; 
            assign rst_busy   = wr_rst_int | rd_rst_int;
        end
    end
    else begin
        (* async_reg = "true" *) reg [1:0] a_rst;
        
        always @ (posedge clk_i or posedge a_rst_i) begin
            if (a_rst_i) 
                a_rst <= 2'b11;
            else 
                a_rst <= {a_rst[0],1'b0};            
        end

        if (BYPASS_RESET_SYNC) begin
            assign wr_rst_int = a_rst_i;
            assign rd_rst_int = a_rst_i;
            assign rst_busy   = 1'b0;
        end
        else begin
            assign wr_rst_int = a_rst[1];
            assign rd_rst_int = a_rst[1];   
            assign rst_busy   = wr_rst_int | rd_rst_int;
        end
    end 
endgenerate

`IP_MODULE_NAME(efx_fifo_ram) # (
    .FAMILY        (FAMILY),
    .MODE          (MODE),
    .WR_DEPTH      (WR_DEPTH),
    .RD_DEPTH      (RD_DEPTH),
    .WDATA_WIDTH   (WDATA_WIDTH),
    .RDATA_WIDTH   (RDATA_WIDTH),
    .WADDR_WIDTH   (WADDR_WIDTH),
    .RADDR_WIDTH   (RADDR_WIDTH),
    .OUTPUT_REG    (OUTPUT_REG),
    .RAM_MUX_RATIO (RAM_MUX_RATIO),
    .ENDIANESS	   (ENDIANESS)
) xefx_fifo_ram (
    .wdata (wdata), 
    .waddr (waddr),
    .raddr (raddr), 
    .we    (wr_en_int), 
    .re    (rd_en_int),
    .wclk  (wr_clk_int),
    .rclk  (rd_clk_int),
    .rdata (rdata)
);

`IP_MODULE_NAME(efx_fifo_ctl) # (
    .FAMILY             (FAMILY),
    .SYNC_CLK           (SYNC_CLK),
    .SYNC_STAGE         (SYNC_STAGE),
    .MODE               (MODE),
    .WR_DEPTH           (WR_DEPTH),
    .WADDR_WIDTH        (WADDR_WIDTH),
    .RADDR_WIDTH        (RADDR_WIDTH),
    .ASYM_WIDTH_RATIO   (ASYM_WIDTH_RATIO),
    .RAM_MUX_RATIO      (RAM_MUX_RATIO),
    .PIPELINE_REG       (PIPELINE_REG),
    .ALMOST_FLAG        (ALMOST_FLAG),
    .PROGRAMMABLE_FULL  (PROGRAMMABLE_FULL),
    .PROG_FULL_ASSERT   (PROG_FULL_ASSERT),
    .PROG_FULL_NEGATE   (PROG_FULL_NEGATE),
    .PROGRAMMABLE_EMPTY (PROGRAMMABLE_EMPTY),
    .PROG_EMPTY_ASSERT  (PROG_EMPTY_ASSERT),
    .PROG_EMPTY_NEGATE  (PROG_EMPTY_NEGATE),
    .OUTPUT_REG         (OUTPUT_REG),
    .HANDSHAKE_FLAG     (HANDSHAKE_FLAG)
) xefx_fifo_ctl (
    .wr_rst          (wr_rst_int),
    .rd_rst          (rd_rst_int),
    .wclk            (wr_clk_int),
    .rclk            (rd_clk_int),
    .we              (wr_en_i),
    .re              (rd_en_i),
    .wr_full         (full_o),
    .wr_ack          (wr_ack_o),
    .rd_empty        (empty_o),
    .wr_almost_full  (almost_full_o),
    .rd_almost_empty (almost_empty_o),
    .wr_prog_full    (prog_full_o),
    .rd_prog_empty   (prog_empty_o),
    .wr_en_int       (wr_en_int),
    .rd_en_int       (rd_en_int),
    .waddr           (waddr),
    .raddr           (raddr),
    .wr_datacount    (wr_datacount_int),
    .rd_datacount    (rd_datacount_int),
    .rd_vld          (rd_valid_o),
    .wr_overflow     (overflow_o),
    .rd_underflow    (underflow_o)
);

function integer depth2width;
input [31:0] depth;
begin : fnDepth2Width
    if (depth > 1) begin
        depth = depth - 1;
        for (depth2width=0; depth>0; depth2width = depth2width + 1)
            depth = depth>>1;
        end
    else
    depth2width = 0;
end
endfunction 

function integer width2depth;
input [31:0] width;
begin : fnWidth2Depth
    width2depth = width**2;
end
endfunction

function integer rdwidthcompute;
input [31:0] asym_option;
input [31:0] wr_width;
begin : RdWidthCompute
    rdwidthcompute = (asym_option==0)? wr_width/16 :
                     (asym_option==1)? wr_width/8  :
                     (asym_option==2)? wr_width/4  :
                     (asym_option==3)? wr_width/2  :
                     (asym_option==4)? wr_width/1  :
                     (asym_option==5)? wr_width*2  :
                     (asym_option==6)? wr_width*4  :
                     (asym_option==7)? wr_width*8  :
                     (asym_option==8)? wr_width*16 : wr_width/1;
end
endfunction

function integer rddepthcompute;
input [31:0] wr_depth;
input [31:0] wr_width;
input [31:0] rd_width;
begin : RdDepthCompute
    rddepthcompute = (wr_depth * wr_width) / rd_width;
end
endfunction

endmodule


/////////////////////////////////////////////////////////////////////////////
//           _____       
//          / _______    Copyright (C) 2013-2021 Efinix Inc. All rights reserved.
//         / /       \   
//        / /  ..    /   simple_dual_port_ram_fifo.v
//       / / .'     /    
//    __/ /.'      /     Description:
//   __   \       /      EFX FIFO
//  /_/ /\ \_____/ /     
// ____/  \_______/      
//
// *******************************
// Revisions:
//
// *******************************

module `IP_MODULE_NAME(efx_fifo_ram) #(
    parameter FAMILY        = "TRION",
    parameter MODE          = "STANDARD",
    parameter WR_DEPTH      = 512,
    parameter RD_DEPTH      = 512,
    parameter WDATA_WIDTH   = 8,
    parameter RDATA_WIDTH   = 8,
    parameter WADDR_WIDTH   = 9,
    parameter RADDR_WIDTH   = 9,
    parameter OUTPUT_REG    = 1,
    parameter RAM_MUX_RATIO = 4,
    parameter ENDIANESS 	= 0 //0: Big endian (default)   1: Little endian 
) (
    input  wire                     wclk,
    input  wire                     rclk,
    input  wire                     we,
    input  wire                     re,
    input  wire [(WDATA_WIDTH-1):0] wdata,
    input  wire [(WADDR_WIDTH-1):0] waddr,
    input  wire [(RADDR_WIDTH-1):0] raddr,
    output wire [(RDATA_WIDTH-1):0] rdata
);

localparam MEM_DEPTH         = (WR_DEPTH > RD_DEPTH) ? WR_DEPTH : RD_DEPTH;
localparam MEM_DATA_WIDTH    = (WDATA_WIDTH > RDATA_WIDTH) ? RDATA_WIDTH : WDATA_WIDTH;   
localparam LSB_WIDTH         = (WADDR_WIDTH > RADDR_WIDTH) ? (WADDR_WIDTH - RADDR_WIDTH) : (RADDR_WIDTH - WADDR_WIDTH);
localparam RDATA_WDATA_RATIO = (RDATA_WIDTH <= WDATA_WIDTH/32) ? "ONE_THIRTYTWO" :
                               (RDATA_WIDTH <= WDATA_WIDTH/16) ? "ONE_SIXTEENTH" :
                               (RDATA_WIDTH <= WDATA_WIDTH/8)  ? "ONE_EIGHTH"    :
                               (RDATA_WIDTH <= WDATA_WIDTH/4)  ? "ONE_FOURTH"    :
                               (RDATA_WIDTH <= WDATA_WIDTH/2)  ? "ONE_HALF"      :
                               (RDATA_WIDTH <= WDATA_WIDTH)    ? "ONE"           :
                               (RDATA_WIDTH <= WDATA_WIDTH*2)  ? "TWO_TIMES"     :
                               (RDATA_WIDTH <= WDATA_WIDTH*4)  ? "FOUR_TIMES"    :
                               (RDATA_WIDTH <= WDATA_WIDTH*4)  ? "EIGHT_TIMES"   :
                               (RDATA_WIDTH <= WDATA_WIDTH*4)  ? "SIXTEEN_TIMES" : "THIRTYTWO_TIMES";

reg [MEM_DATA_WIDTH-1:0] ram[MEM_DEPTH-1:0];
reg [RDATA_WIDTH-1:0]    r_rdata_1P;
reg [RDATA_WIDTH-1:0]    r_rdata_2P;

wire                     re_int;

generate
    if (FAMILY == "TRION") begin
        if (RDATA_WDATA_RATIO == "ONE") begin
            always @ (posedge wclk) begin
                if (we)
                    ram[waddr] <= wdata;
            end
    
            always @ (posedge rclk) begin
                if (re_int) begin
                    r_rdata_1P <= ram[raddr];
                end
                r_rdata_2P <= r_rdata_1P;
            end
        end
        
        else if (RDATA_WDATA_RATIO == "ONE_THIRTYTWO" || RDATA_WDATA_RATIO == "ONE_SIXTEENTH" || RDATA_WDATA_RATIO == "ONE_EIGHTH" || RDATA_WDATA_RATIO == "ONE_FOURTH"  || RDATA_WDATA_RATIO == "ONE_HALF" ) begin
            if (ENDIANESS == 0) begin 
            	integer i;
            	reg  [LSB_WIDTH-1 :0 ]   lsbaddr;
            	always @ (posedge wclk) begin
                	for (i=0; i<RAM_MUX_RATIO; i=i+1) begin
                    	lsbaddr = RAM_MUX_RATIO-1-i;
                    	if (we) begin
                            ram[{waddr,lsbaddr}] <= wdata[((WDATA_WIDTH/RAM_MUX_RATIO)*i) +: WDATA_WIDTH/RAM_MUX_RATIO];
                        end
                    end
                end
                always @ (posedge rclk) begin 
                	if (re_int) begin
                		r_rdata_1P <= ram[raddr];
                    end
                		r_rdata_2P <= r_rdata_1P;
                end
            end
            else begin //endianess == 1
            	integer i;
            	reg  [LSB_WIDTH-1 :0 ]   lsbaddr;
            	always @ (posedge wclk) begin
            		for (i=0; i<RAM_MUX_RATIO; i=i+1) begin
                    	lsbaddr = i;
                    	if (we) begin
                            ram[{waddr,lsbaddr}] <= wdata[((WDATA_WIDTH/RAM_MUX_RATIO)*i) +: WDATA_WIDTH/RAM_MUX_RATIO];
                        end
                    end
                end
                always @ (posedge rclk) begin 
                	if (re_int) begin
                		r_rdata_1P <= ram[raddr];
                	end
                		r_rdata_2P <= r_rdata_1P;
                end
            end
        end
        
        else if (RDATA_WDATA_RATIO == "TWO_TIMES" || RDATA_WDATA_RATIO == "FOUR_TIMES"  || RDATA_WDATA_RATIO == "EIGHT_TIMES"  || RDATA_WDATA_RATIO == "SIXTEEN_TIMES"  ||RDATA_WDATA_RATIO == "THIRTYTWO_TIMES" ) begin
            //integer i;
        	//reg  [LSB_WIDTH-1 :0 ]   lsbaddr;
        	if (ENDIANESS == 0) begin
        		always @ (posedge wclk) begin
        			if (we)
        				ram[waddr] <= wdata;
        		end
        		integer i;
        		reg  [LSB_WIDTH-1 :0 ]   lsbaddr; 
        		always @ (posedge rclk) begin
        			for (i=0; i<RAM_MUX_RATIO; i=i+1) begin
                    	lsbaddr = RAM_MUX_RATIO-1-i;
                    	if (re_int) begin
                    		r_rdata_1P[((RDATA_WIDTH/RAM_MUX_RATIO)*i) +: RDATA_WIDTH/RAM_MUX_RATIO] <= ram[{raddr,lsbaddr}];
                    	end
                        	r_rdata_2P <= r_rdata_1P;
                    end
                end 
            end
            else begin //endianess == 1
            	always @ (posedge wclk) begin
        			if (we)
        				ram[waddr] <= wdata;
        		end
        		integer i;
        		reg  [LSB_WIDTH-1 :0 ]   lsbaddr;
        		always @ (posedge rclk) begin
        			for (i=0; i<RAM_MUX_RATIO; i=i+1) begin
                    	lsbaddr = i;
                    	if (re_int) begin
                    		r_rdata_1P[((RDATA_WIDTH/RAM_MUX_RATIO)*i) +: RDATA_WIDTH/RAM_MUX_RATIO] <= ram[{raddr,lsbaddr}];
                    	end
                        	r_rdata_2P <= r_rdata_1P;
                    end
                end
            end
        end
        if (OUTPUT_REG) begin
            assign re_int = re;
            assign rdata  = r_rdata_2P;            
        end
        else begin
            assign re_int = re;
            assign rdata  = r_rdata_1P;
        end
    end
    else if (FAMILY == "TITANIUM") begin
        if (RDATA_WDATA_RATIO == "ONE") begin
            always @ (posedge wclk) begin
                if (we)
                    ram[waddr] <= wdata;
            end
    
            always @ (posedge rclk) begin
                if (re_int) begin
                    r_rdata_1P <= ram[raddr];
                    r_rdata_2P <= r_rdata_1P;
                end
            end
        end 
        else if (RDATA_WDATA_RATIO == "ONE_THIRTYTWO" || RDATA_WDATA_RATIO == "ONE_SIXTEENTH" || RDATA_WDATA_RATIO == "ONE_EIGHTH" || RDATA_WDATA_RATIO == "ONE_FOURTH"  || RDATA_WDATA_RATIO == "ONE_HALF" ) begin
            //integer i;
            //reg  [LSB_WIDTH-1 :0 ]   lsbaddr;
            if (ENDIANESS == 0) begin
            	integer i;
            	reg  [LSB_WIDTH-1 :0 ]   lsbaddr;
            	always @ (posedge wclk) begin
            		for (i=0; i<RAM_MUX_RATIO; i=i+1) begin
                    	lsbaddr = RAM_MUX_RATIO-1-i;
                    	if (we) begin
                            	ram[{waddr,lsbaddr}] <= wdata[((WDATA_WIDTH/RAM_MUX_RATIO)*i) +: WDATA_WIDTH/RAM_MUX_RATIO];
                        end
                    end
                 end
               	always @ (posedge rclk) begin 
               		if (re_int) begin
               			r_rdata_1P <= ram[raddr];
               			r_rdata_2P <= r_rdata_1P;
               		end
               	end
            end
            
            else begin //endianess == 1
            	integer i;
            	reg  [LSB_WIDTH-1 :0 ]   lsbaddr;
            	always @ (posedge wclk) begin
            		for (i=0; i<RAM_MUX_RATIO; i=i+1) begin
                    	lsbaddr = i;
                    	if (we) begin
                            	ram[{waddr,lsbaddr}] <= wdata[((WDATA_WIDTH/RAM_MUX_RATIO)*i) +: WDATA_WIDTH/RAM_MUX_RATIO];
                        end
                    end
                 end
               	always @ (posedge rclk) begin 
               		if (re_int) begin
               			r_rdata_1P <= ram[raddr];
               			r_rdata_2P <= r_rdata_1P;
               		end
               	end
            end
        end
        else if (RDATA_WDATA_RATIO == "TWO_TIMES" || RDATA_WDATA_RATIO == "FOUR_TIMES"  || RDATA_WDATA_RATIO == "EIGHT_TIMES"  || RDATA_WDATA_RATIO == "SIXTEEN_TIMES"  || RDATA_WDATA_RATIO == "THIRTYTWO_TIMES" ) begin
        	//integer i;
            //reg  [LSB_WIDTH-1 :0 ]   lsbaddr;
        	if (ENDIANESS == 0) begin
        		always @ (posedge wclk) begin
        			if (we)
        				ram[waddr] <= wdata;
        		end
        		integer i;
            	reg  [LSB_WIDTH-1 :0 ]   lsbaddr;        
            	always @ (posedge rclk) begin
            		for (i=0; i<RAM_MUX_RATIO; i=i+1) begin
                    	lsbaddr = RAM_MUX_RATIO-1-i;
                    	if (re_int) begin
                    		r_rdata_1P[((RDATA_WIDTH/RAM_MUX_RATIO)*i) +: RDATA_WIDTH/RAM_MUX_RATIO] <= ram[{raddr,lsbaddr}];
                    		r_rdata_2P                                                               <= r_rdata_1P;
                    	end
                    end
                end 
            end
            
            else begin //endianess ==1
        		always @ (posedge wclk) begin
        			if (we)
        				ram[waddr] <= wdata;
        		end
        		integer i;
        		reg  [LSB_WIDTH-1 :0 ]   lsbaddr;        
            	always @ (posedge rclk) begin
            		for (i=0; i<RAM_MUX_RATIO; i=i+1) begin
                    	lsbaddr = i;
                    	if (re_int) begin
                    		r_rdata_1P[((RDATA_WIDTH/RAM_MUX_RATIO)*i) +: RDATA_WIDTH/RAM_MUX_RATIO] <= ram[{raddr,lsbaddr}];
                    		r_rdata_2P                                                               <= r_rdata_1P;
                    	end
                    end
                end 
            end
        end
        if (MODE == "STANDARD") begin     
            if (OUTPUT_REG) begin
                reg re_r;
                always @ (posedge rclk) begin
                    re_r <= re;
                end
                assign re_int = re | re_r;        
                assign rdata  = r_rdata_2P;            
            end
            else begin
                assign re_int = re;
                assign rdata  = r_rdata_1P;
            end
        end
        else begin
            assign re_int = re;
            assign rdata  = r_rdata_1P;
        end        
    end
endgenerate

endmodule

////////////////////////////////////////////////////////////////////////////////
// Copyright (C) 2013-2021 Efinix Inc. All rights reserved.              
//
// This   document  contains  proprietary information  which   is        
// protected by  copyright. All rights  are reserved.  This notice       
// refers to original work by Efinix, Inc. which may be derivitive       
// of other work distributed under license of the authors.  In the       
// case of derivative work, nothing in this notice overrides the         
// original author's license agreement.  Where applicable, the           
// original license agreement is included in it's original               
// unmodified form immediately below this header.                        
//
// WARRANTY DISCLAIMER.                                                  
//     THE  DESIGN, CODE, OR INFORMATION ARE PROVIDED “AS IS” AND        
//     EFINIX MAKES NO WARRANTIES, EXPRESS OR IMPLIED WITH               
//     RESPECT THERETO, AND EXPRESSLY DISCLAIMS ANY IMPLIED WARRANTIES,  
//     INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF          
//     MERCHANTABILITY, NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR    
//     PURPOSE.  SOME STATES DO NOT ALLOW EXCLUSIONS OF AN IMPLIED       
//     WARRANTY, SO THIS DISCLAIMER MAY NOT APPLY TO LICENSEE.           
//
// LIMITATION OF LIABILITY.                                              
//     NOTWITHSTANDING ANYTHING TO THE CONTRARY, EXCEPT FOR BODILY       
//     INJURY, EFINIX SHALL NOT BE LIABLE WITH RESPECT TO ANY SUBJECT    
//     MATTER OF THIS AGREEMENT UNDER TORT, CONTRACT, STRICT LIABILITY   
//     OR ANY OTHER LEGAL OR EQUITABLE THEORY (I) FOR ANY INDIRECT,      
//     SPECIAL, INCIDENTAL, EXEMPLARY OR CONSEQUENTIAL DAMAGES OF ANY    
//     CHARACTER INCLUDING, WITHOUT LIMITATION, DAMAGES FOR LOSS OF      
//     GOODWILL, DATA OR PROFIT, WORK STOPPAGE, OR COMPUTER FAILURE OR   
//     MALFUNCTION, OR IN ANY EVENT (II) FOR ANY AMOUNT IN EXCESS, IN    
//     THE AGGREGATE, OF THE FEE PAID BY LICENSEE TO EFINIX HEREUNDER    
//     (OR, IF THE FEE HAS BEEN WAIVED, $100), EVEN IF EFINIX SHALL HAVE 
//     BEEN INFORMED OF THE POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO 
//     NOT ALLOW THE EXCLUSION OR LIMITATION OF INCIDENTAL OR            
//     CONSEQUENTIAL DAMAGES, SO THIS LIMITATION AND EXCLUSION MAY NOT   
//     APPLY TO LICENSEE.
//
////////////////////////////////////////////////////////////////////////////////


/////////////////////////////////////////////////////////////////////////////
//           _____       
//          / _______    Copyright (C) 2013-2020 Efinix Inc. All rights reserved.
//         / /       \   
//        / /  ..    /   gray2bin.v
//       / / .'     /    
//    __/ /.'      /     Description:
//   __   \       /      Gray to Binary Encoding Convertor
//  /_/ /\ \_____/ /     
// ____/  \_______/      
//
// *******************************
// Revisions:
// 1.0 Initial rev
//
// *******************************

`resetall
`timescale 1ns/1ps

module `IP_MODULE_NAME(efx_fifo_gray2bin)
#(parameter WIDTH=5)
(// outputs
 output wire [WIDTH-1:0] bin_o,
 // input
 input [WIDTH-1:0] gray_i);

//---------------------------------------------------------------------
// Recursive Module
// Description: reduction xor
generate
   if (WIDTH > 1) begin
      wire [1:0] bin_1;
      assign bin_1 = {gray_i[WIDTH-1], gray_i[WIDTH-1]^gray_i[WIDTH-2]};
      if (WIDTH == 2) begin
	 assign bin_o = bin_1;
      end
      else begin
	 assign bin_o[WIDTH-1] = bin_1[1];
	 `IP_MODULE_NAME(efx_fifo_gray2bin) #(.WIDTH(WIDTH-1)) u_gray2bin (.bin_o(bin_o[WIDTH-2:0]), .gray_i({bin_1[0], gray_i[WIDTH-3:0]}));
      end
   end
   else /* if (WIDTH == 1) */
     assign bin_o = gray_i;
endgenerate
   
endmodule 

////////////////////////////////////////////////////////////////////////////////
// Copyright (C) 2013-2020 Efinix Inc. All rights reserved.              
//
// This   document  contains  proprietary information  which   is        
// protected by  copyright. All rights  are reserved.  This notice       
// refers to original work by Efinix, Inc. which may be derivitive       
// of other work distributed under license of the authors.  In the       
// case of derivative work, nothing in this notice overrides the         
// original author's license agreement.  Where applicable, the           
// original license agreement is included in it's original               
// unmodified form immediately below this header.                        
//
// WARRANTY DISCLAIMER.                                                  
//     THE  DESIGN, CODE, OR INFORMATION ARE PROVIDED “AS IS” AND        
//     EFINIX MAKES NO WARRANTIES, EXPRESS OR IMPLIED WITH               
//     RESPECT THERETO, AND EXPRESSLY DISCLAIMS ANY IMPLIED WARRANTIES,  
//     INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF          
//     MERCHANTABILITY, NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR    
//     PURPOSE.  SOME STATES DO NOT ALLOW EXCLUSIONS OF AN IMPLIED       
//     WARRANTY, SO THIS DISCLAIMER MAY NOT APPLY TO LICENSEE.           
//
// LIMITATION OF LIABILITY.                                              
//     NOTWITHSTANDING ANYTHING TO THE CONTRARY, EXCEPT FOR BODILY       
//     INJURY, EFINIX SHALL NOT BE LIABLE WITH RESPECT TO ANY SUBJECT    
//     MATTER OF THIS AGREEMENT UNDER TORT, CONTRACT, STRICT LIABILITY   
//     OR ANY OTHER LEGAL OR EQUITABLE THEORY (I) FOR ANY INDIRECT,      
//     SPECIAL, INCIDENTAL, EXEMPLARY OR CONSEQUENTIAL DAMAGES OF ANY    
//     CHARACTER INCLUDING, WITHOUT LIMITATION, DAMAGES FOR LOSS OF      
//     GOODWILL, DATA OR PROFIT, WORK STOPPAGE, OR COMPUTER FAILURE OR   
//     MALFUNCTION, OR IN ANY EVENT (II) FOR ANY AMOUNT IN EXCESS, IN    
//     THE AGGREGATE, OF THE FEE PAID BY LICENSEE TO EFINIX HEREUNDER    
//     (OR, IF THE FEE HAS BEEN WAIVED, $100), EVEN IF EFINIX SHALL HAVE 
//     BEEN INFORMED OF THE POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO 
//     NOT ALLOW THE EXCLUSION OR LIMITATION OF INCIDENTAL OR            
//     CONSEQUENTIAL DAMAGES, SO THIS LIMITATION AND EXCLUSION MAY NOT   
//     APPLY TO LICENSEE.
//
////////////////////////////////////////////////////////////////////////////////


////////////////////////////////////////////////////////////////////////////
//           _____       
//          / _______    Copyright (C) 2013-2020 Efinix Inc. All rights reserved.
//         / /       \   
//        / /  ..    /   pipe_reg.v
//       / / .'     /    
//    __/ /.'      /     Description:
//   __   \       /      Parallel Pipelining Shift Register
//  /_/ /\ \_____/ /     
// ____/  \_______/      
//
// *******************************
// Revisions:
// 1.0 Initial rev
//
// *******************************

module `IP_MODULE_NAME(efx_fifo_datasync) #(
    parameter STAGE = 32,
    parameter WIDTH = 4
) (
 input  wire             clk_i,
 input  wire [WIDTH-1:0] d_i,
 output wire [WIDTH-1:0] d_o
);

(* async_reg = "true" *) reg [WIDTH-1:0] pipe_reg [STAGE-1:0];
integer i;

always @(posedge clk_i) begin
  for (i=STAGE-1; i>0; i = i - 1) begin
    pipe_reg[i] <= pipe_reg[i-1];
  end
  pipe_reg[0] <= d_i;
end
assign d_o = pipe_reg[STAGE-1];
   

endmodule

////////////////////////////////////////////////////////////////////////////////
// Copyright (C) 2013-2020 Efinix Inc. All rights reserved.              
//
// This   document  contains  proprietary information  which   is        
// protected by  copyright. All rights  are reserved.  This notice       
// refers to original work by Efinix, Inc. which may be derivitive       
// of other work distributed under license of the authors.  In the       
// case of derivative work, nothing in this notice overrides the         
// original author's license agreement.  Where applicable, the           
// original license agreement is included in it's original               
// unmodified form immediately below this header.                        
//
// WARRANTY DISCLAIMER.                                                  
//     THE  DESIGN, CODE, OR INFORMATION ARE PROVIDED “AS IS” AND        
//     EFINIX MAKES NO WARRANTIES, EXPRESS OR IMPLIED WITH               
//     RESPECT THERETO, AND EXPRESSLY DISCLAIMS ANY IMPLIED WARRANTIES,  
//     INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF          
//     MERCHANTABILITY, NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR    
//     PURPOSE.  SOME STATES DO NOT ALLOW EXCLUSIONS OF AN IMPLIED       
//     WARRANTY, SO THIS DISCLAIMER MAY NOT APPLY TO LICENSEE.           
//
// LIMITATION OF LIABILITY.                                              
//     NOTWITHSTANDING ANYTHING TO THE CONTRARY, EXCEPT FOR BODILY       
//     INJURY, EFINIX SHALL NOT BE LIABLE WITH RESPECT TO ANY SUBJECT    
//     MATTER OF THIS AGREEMENT UNDER TORT, CONTRACT, STRICT LIABILITY   
//     OR ANY OTHER LEGAL OR EQUITABLE THEORY (I) FOR ANY INDIRECT,      
//     SPECIAL, INCIDENTAL, EXEMPLARY OR CONSEQUENTIAL DAMAGES OF ANY    
//     CHARACTER INCLUDING, WITHOUT LIMITATION, DAMAGES FOR LOSS OF      
//     GOODWILL, DATA OR PROFIT, WORK STOPPAGE, OR COMPUTER FAILURE OR   
//     MALFUNCTION, OR IN ANY EVENT (II) FOR ANY AMOUNT IN EXCESS, IN    
//     THE AGGREGATE, OF THE FEE PAID BY LICENSEE TO EFINIX HEREUNDER    
//     (OR, IF THE FEE HAS BEEN WAIVED, $100), EVEN IF EFINIX SHALL HAVE 
//     BEEN INFORMED OF THE POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO 
//     NOT ALLOW THE EXCLUSION OR LIMITATION OF INCIDENTAL OR            
//     CONSEQUENTIAL DAMAGES, SO THIS LIMITATION AND EXCLUSION MAY NOT   
//     APPLY TO LICENSEE.
//
////////////////////////////////////////////////////////////////////////////////


/////////////////////////////////////////////////////////////////////////////
//           _____       
//          / _______    Copyright (C) 2013-2021 Efinix Inc. All rights reserved.
//         / /       \   
//        / /  ..    /   simple_dual_port_ram_fifo.v
//       / / .'     /    
//    __/ /.'      /     Description:
//   __   \       /      EFX FIFO
//  /_/ /\ \_____/ /     
// ____/  \_______/      
//
// *******************************
// Revisions:
//
// *******************************

module `IP_MODULE_NAME(efx_fifo_ctl) # (
    parameter FAMILY             = "TRION",
    parameter SYNC_CLK           = 1,
    parameter SYNC_STAGE         = 2,
    parameter MODE               = "STANDARD",
    parameter WR_DEPTH           = 512,
    parameter WADDR_WIDTH        = 9,
    parameter RADDR_WIDTH        = 9,
    parameter ASYM_WIDTH_RATIO   = 4,
    parameter RAM_MUX_RATIO      = 1,
    parameter PIPELINE_REG       = 1,
    parameter ALMOST_FLAG        = 1,
    parameter PROGRAMMABLE_FULL  = "NONE",
    parameter PROG_FULL_ASSERT   = 0,
    parameter PROG_FULL_NEGATE   = 0,
    parameter PROGRAMMABLE_EMPTY = "NONE",
    parameter PROG_EMPTY_ASSERT  = 0,
    parameter PROG_EMPTY_NEGATE  = 0,
    parameter OUTPUT_REG         = 0,
    parameter HANDSHAKE_FLAG     = 1
)(
    input   wire                   wr_rst,
    input   wire                   rd_rst,
    input   wire                   wclk,
    input   wire                   rclk,
    input   wire                   we,
    input   wire                   re,
    output  wire                   wr_full,
    output  reg                    wr_ack,
    output  wire                   wr_almost_full,
    output  wire                   rd_empty,
    output  wire                   rd_almost_empty,
    output  wire                   wr_prog_full,
    output  wire                   rd_prog_empty,
    output  wire                   wr_en_int,
    output  wire                   rd_en_int,
    output  wire [WADDR_WIDTH-1:0] waddr,
    output  wire [RADDR_WIDTH-1:0] raddr,
    output  wire [WADDR_WIDTH:0]   wr_datacount,
    output  wire [RADDR_WIDTH:0]   rd_datacount,
    output  wire                   rd_vld,
    output  reg                    wr_overflow,
    output  reg                    rd_underflow
);

reg  [WADDR_WIDTH:0] waddr_cntr;
reg  [RADDR_WIDTH:0] raddr_cntr;
reg  [RADDR_WIDTH:0] raddr_cntr_r;
reg                  rd_valid;

wire [RADDR_WIDTH:0] raddr_cntr_w;
wire [WADDR_WIDTH:0] waddr_int;
wire [RADDR_WIDTH:0] raddr_int;
wire [RADDR_WIDTH:0] raddr_int_dcount;
wire [RADDR_WIDTH:0] raddr_dcount;
wire                 rd_empty_int;
wire [WADDR_WIDTH:0] wr_datacount_int;
wire [RADDR_WIDTH:0] rd_datacount_int;

assign waddr     = waddr_cntr[WADDR_WIDTH-1:0];
assign raddr     = raddr_cntr[RADDR_WIDTH-1:0];
assign wr_en_int = we & ~wr_full;

generate
    if (MODE == "FWFT") begin    
        reg init_set;
        reg rd_empty_fwft;
        assign rd_en_int     = (~rd_empty_int & rd_empty) | (re & ~rd_empty_int);
        assign rd_empty      = rd_empty_fwft;
        assign raddr_cntr_w  = ~rd_empty ? raddr_cntr_r/*raddr_cntr-1*/ : raddr_cntr;
        
        if (ASYM_WIDTH_RATIO < 4) begin
            assign wr_datacount  = wr_datacount_int;
            assign rd_datacount  = rd_empty ? rd_datacount_int : ~init_set ? (rd_datacount_int+1'b1) : rd_datacount_int;
        end
        else begin
            assign wr_datacount  = wr_datacount_int;
            assign rd_datacount  = rd_datacount_int;        
        end
        
        always @ (posedge rclk or posedge rd_rst) begin
            if (rd_rst) begin
                init_set <= 1'b1;
            end
            else if (~init_set & rd_empty) begin
                init_set <= 1'b1;            
            end
            else if (~rd_empty_int) begin
                init_set <= 1'b0;            
            end
            else if (rd_empty) begin
                init_set <= 1'b1;            
            end
        end
        
        always @ (posedge rclk or posedge rd_rst) begin
            if (rd_rst) begin
                rd_empty_fwft <= 1'b1;
            end
            else if (rd_en_int) begin
                rd_empty_fwft <= 1'b0;            
            end
            else if (re) begin
                rd_empty_fwft <= 1'b1;            
            end
        end          
        
        if (FAMILY == "TRION") begin
            if (OUTPUT_REG) begin
                always @ (posedge rclk or posedge rd_rst) begin
                    if (rd_rst) begin
                        rd_valid <= 1'b0;
                    end
                    else begin
                        rd_valid <= ~rd_empty;
                    end
                end
                assign rd_vld = rd_valid;                
            end    
            else begin
                assign rd_vld = ~rd_empty;                
            end
        end
        else begin
            assign rd_vld = ~rd_empty;
        end
    end
    else begin
        assign rd_en_int     = re & ~rd_empty_int;
        assign rd_empty      = rd_empty_int;
        assign raddr_cntr_w  = raddr_cntr;
        assign wr_datacount  = wr_datacount_int;
        assign rd_datacount  = rd_datacount_int;
        
        if (OUTPUT_REG) begin
            reg rd_valid_r;
            always @ (posedge rclk or posedge rd_rst) begin
                if (rd_rst) begin
                    rd_valid_r <= 'h0;
                    rd_valid   <= 'h0;
                end
                else begin
                    {rd_valid,rd_valid_r} <= {rd_valid_r,rd_en_int};
                end
            end
            assign rd_vld = rd_valid;            
        end
        else begin
            always @ (posedge rclk or posedge rd_rst) begin
                if (rd_rst) begin
                    rd_valid  <= 'h0;
                end
                else begin
                    rd_valid <= rd_en_int;
                end
            end
            assign rd_vld = rd_valid;
        end
    end
    
    if (ALMOST_FLAG) begin
        assign wr_almost_full   = wr_datacount_int >= WR_DEPTH-1;
        assign rd_almost_empty  = rd_datacount_int <= 'd1;  
    end
    else begin
        assign wr_almost_full   = 1'b0;
        assign rd_almost_empty  = 1'b0;        
    end
    
    if (PROGRAMMABLE_FULL == "STATIC_SINGLE") begin
        reg    wr_prog_full_int;
        assign wr_prog_full  = wr_datacount >= PROG_FULL_ASSERT;
        
        always @ (posedge wclk or posedge wr_rst) begin
            if (wr_rst) begin
                wr_prog_full_int  <= 1'b0;
            end
            else begin
                wr_prog_full_int  <= wr_prog_full;
            end
        end  
    end
    else if (PROGRAMMABLE_FULL == "STATIC_DUAL") begin
        reg    wr_prog_full_int;
        assign wr_prog_full  = wr_prog_full_int ? wr_datacount >= PROG_FULL_NEGATE : wr_datacount >= PROG_FULL_ASSERT;   

        always @ (posedge wclk or posedge wr_rst) begin
            if (wr_rst) begin
                wr_prog_full_int  <= 1'b0;
            end
            else begin
                wr_prog_full_int  <= wr_prog_full;
            end
        end              
    end
    else begin
        assign wr_prog_full  = 1'b0; 
    end
        
    if (PROGRAMMABLE_EMPTY == "STATIC_SINGLE") begin
        reg    rd_prog_empty_int;
        assign rd_prog_empty  = rd_datacount <= PROG_EMPTY_ASSERT;
            
        always @ (posedge rclk or posedge rd_rst) begin
            if (rd_rst) begin
                rd_prog_empty_int <= 1'b1;
            end
            else begin
                rd_prog_empty_int <= rd_prog_empty;
            end
        end
    end
    else if (PROGRAMMABLE_EMPTY == "STATIC_DUAL") begin
        reg    rd_prog_empty_int;
        assign rd_prog_empty = rd_prog_empty_int ? (rd_datacount <= PROG_EMPTY_NEGATE) : (rd_datacount <= PROG_EMPTY_ASSERT);
            
        always @ (posedge rclk or posedge rd_rst) begin
            if (rd_rst) begin
                rd_prog_empty_int <= 1'b1;
            end
            else begin
                rd_prog_empty_int <= rd_prog_empty;
            end
        end  
    end
    else begin
        assign rd_prog_empty  = 1'b0; 
    end
    
    if (HANDSHAKE_FLAG) begin
    
        always @ (posedge wclk or posedge wr_rst) begin
            if (wr_rst) begin
                wr_ack <= 1'b0;
            end
            else begin
                wr_ack <= wr_en_int & ~wr_overflow;
            end
        end

        always @ (posedge wclk or posedge wr_rst) begin
            if (wr_rst) begin
                wr_overflow <= 1'b0;
            end
            else if (we && wr_full) begin
                wr_overflow <= 1'b1;
            end
            else begin
                wr_overflow <= 1'b0;            
            end
        end
        
        always @ (posedge rclk or posedge rd_rst) begin
            if (rd_rst) begin
                rd_underflow <= 1'b0;
            end
            else if (re && rd_empty) begin
                rd_underflow <= 1'b1;
            end
            else begin
                rd_underflow <= 1'b0;            
            end
        end
    end
    
    localparam RATIO_WIDTH = (RADDR_WIDTH >= WADDR_WIDTH)? RADDR_WIDTH - WADDR_WIDTH : WADDR_WIDTH - RADDR_WIDTH;
    
    if (ASYM_WIDTH_RATIO < 4) begin
        assign wr_full          = (waddr_cntr[WADDR_WIDTH]^raddr_int[RADDR_WIDTH]) & (waddr_cntr[WADDR_WIDTH-1:0] == raddr_int[RADDR_WIDTH-1:RATIO_WIDTH]);
        assign rd_empty_int     = waddr_int[WADDR_WIDTH:0] == raddr_cntr[RADDR_WIDTH:RATIO_WIDTH];
        assign wr_datacount_int = waddr_cntr - (raddr_int/RAM_MUX_RATIO);
        assign rd_datacount_int = (waddr_int*RAM_MUX_RATIO)-raddr_cntr;
    end
    else begin
        assign wr_full          = (waddr_cntr[WADDR_WIDTH]^raddr_int[RADDR_WIDTH]) & (waddr_cntr[WADDR_WIDTH-1:RATIO_WIDTH] == raddr_int[RADDR_WIDTH-1:0]);
        assign rd_empty_int     = (waddr_int- raddr_cntr*RAM_MUX_RATIO) < RAM_MUX_RATIO;
        assign wr_datacount_int = waddr_cntr - (raddr_int*RAM_MUX_RATIO);
        assign rd_datacount_int = (waddr_int/RAM_MUX_RATIO)-raddr_cntr_w;
    end
endgenerate

always @ (posedge wclk or posedge wr_rst) begin
    if (wr_rst) begin
        waddr_cntr <= 'h0;
    end
    else if (wr_en_int) begin
        waddr_cntr <= waddr_cntr + 1'b1;
    end
end

always @ (posedge rclk or posedge rd_rst) begin
    if (rd_rst) begin
        raddr_cntr   <= 'h0;
        raddr_cntr_r <= 'h0;
    end
    else if (rd_en_int) begin
        raddr_cntr   <= raddr_cntr + 1'b1;
        raddr_cntr_r <= raddr_cntr;
    end
end

generate
    if (SYNC_CLK) begin
        assign waddr_int        = waddr_cntr;
        assign raddr_int        = raddr_cntr_w;
    end
    else begin
        reg  [RADDR_WIDTH:0] raddr_cntr_gry_r;
        reg  [WADDR_WIDTH:0] waddr_cntr_gry_r;
        
        wire [RADDR_WIDTH:0] raddr_cntr_gry;
        wire [RADDR_WIDTH:0] raddr_cntr_gry_sync;
        wire [RADDR_WIDTH:0] raddr_cntr_sync_g2b;
        wire [WADDR_WIDTH:0] waddr_cntr_gry;
        wire [WADDR_WIDTH:0] waddr_cntr_gry_sync;
        wire [WADDR_WIDTH:0] waddr_cntr_sync_g2b;

        if (PIPELINE_REG) begin
            reg  [RADDR_WIDTH:0] raddr_cntr_sync_g2b_r;    
            reg  [WADDR_WIDTH:0] waddr_cntr_sync_g2b_r;        
        
            assign waddr_int        = waddr_cntr_sync_g2b_r;
            assign raddr_int        = raddr_cntr_sync_g2b_r;
            
            always @ (posedge wclk or posedge wr_rst) begin
                if (wr_rst) begin
                    raddr_cntr_sync_g2b_r <= 'h0;
                end
                else begin
                    raddr_cntr_sync_g2b_r <= raddr_cntr_sync_g2b;
                end
            end
            
            always @ (posedge rclk or posedge rd_rst) begin
                if (rd_rst) begin
                    waddr_cntr_sync_g2b_r <= 'h0;
                end
                else begin
                    waddr_cntr_sync_g2b_r <= waddr_cntr_sync_g2b;
                end
            end
        end
        else begin
            assign waddr_int        = waddr_cntr_sync_g2b;
            assign raddr_int        = raddr_cntr_sync_g2b;        
        end
      
        always @ (posedge rclk or posedge rd_rst) begin
            if (rd_rst) begin
                raddr_cntr_gry_r <= 'h0;
            end
            else begin
                raddr_cntr_gry_r <= raddr_cntr_gry;
            end
        end
        `IP_MODULE_NAME(efx_fifo_bin2gray) # (.WIDTH(RADDR_WIDTH+1)                     ) xrd2wr_bin2gray    (.bin_i(raddr_cntr_w), .gray_o(raddr_cntr_gry));
        `IP_MODULE_NAME(efx_fifo_datasync) # (.STAGE(SYNC_STAGE), .WIDTH (RADDR_WIDTH+1)) xrd2wr_addr_sync   (.clk_i(wclk), .d_i(raddr_cntr_gry_r), .d_o(raddr_cntr_gry_sync));
        `IP_MODULE_NAME(efx_fifo_gray2bin) # (.WIDTH(RADDR_WIDTH+1)                     ) xrd2wr_gray2bin    (.gray_i(raddr_cntr_gry_sync), .bin_o(raddr_cntr_sync_g2b));
        
        always @ (posedge wclk or posedge wr_rst) begin
            if (wr_rst) begin
                waddr_cntr_gry_r <= 'h0;
            end
            else begin
                waddr_cntr_gry_r <= waddr_cntr_gry;
            end
        end        
        `IP_MODULE_NAME(efx_fifo_bin2gray) # (.WIDTH(WADDR_WIDTH+1)                     ) wr2rd_bin2gray  (.bin_i(waddr_cntr), .gray_o(waddr_cntr_gry));
        `IP_MODULE_NAME(efx_fifo_datasync) # (.STAGE(SYNC_STAGE), .WIDTH (WADDR_WIDTH+1)) wr2rd_addr_sync (.clk_i(rclk), .d_i(waddr_cntr_gry_r), .d_o(waddr_cntr_gry_sync));
        `IP_MODULE_NAME(efx_fifo_gray2bin) # (.WIDTH(WADDR_WIDTH+1)                     ) wr2rd_gray2bin  (.gray_i(waddr_cntr_gry_sync), .bin_o(waddr_cntr_sync_g2b));        

    end
endgenerate
endmodule


////////////////////////////////////////////////////////////////////////////
//           _____       
//          / _______    Copyright (C) 2013-2020 Efinix Inc. All rights reserved.
//         / /       \   
//        / /  ..    /   bin2gray.v
//       / / .'     /    
//    __/ /.'      /     Description:
//   __   \       /      Binary to Gray Encoding Convertor
//  /_/ /\ \_____/ /     
// ____/  \_______/      
//
// *******************************
// Revisions:
// 1.0 Initial rev
//
// *******************************

`resetall
`timescale 1ns/1ps

module `IP_MODULE_NAME(efx_fifo_bin2gray)
#(parameter WIDTH=5)
(// outputs
 output wire [WIDTH-1:0] gray_o,
 // input
 input [WIDTH-1:0] bin_i
 );

//---------------------------------------------------------------------
// Function :   bit_xor
// Description: reduction xor
function bit_xor (
  input [31:0] nex_bit,
  input [31:0] curr_bit,
  input [WIDTH-1:0] xor_in);
  begin : fn_bit_xor
    bit_xor = xor_in[nex_bit] ^ xor_in[curr_bit];
  end
endfunction

// Convert Binary to Gray, bit by bit
generate 
begin
  genvar bit_idx;
  for(bit_idx=0; bit_idx<WIDTH-1; bit_idx=bit_idx+1) begin : gBinBits
    assign gray_o[bit_idx] = bit_xor(bit_idx+1, bit_idx, bin_i);
  end
  assign   gray_o[WIDTH-1] = bin_i[WIDTH-1];
end
endgenerate

endmodule 

////////////////////////////////////////////////////////////////////////////////
// Copyright (C) 2013-2020 Efinix Inc. All rights reserved.              
//
// This   document  contains  proprietary information  which   is        
// protected by  copyright. All rights  are reserved.  This notice       
// refers to original work by Efinix, Inc. which may be derivitive       
// of other work distributed under license of the authors.  In the       
// case of derivative work, nothing in this notice overrides the         
// original author's license agreement.  Where applicable, the           
// original license agreement is included in it's original               
// unmodified form immediately below this header.                        
//
// WARRANTY DISCLAIMER.                                                  
//     THE  DESIGN, CODE, OR INFORMATION ARE PROVIDED “AS IS” AND        
//     EFINIX MAKES NO WARRANTIES, EXPRESS OR IMPLIED WITH               
//     RESPECT THERETO, AND EXPRESSLY DISCLAIMS ANY IMPLIED WARRANTIES,  
//     INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF          
//     MERCHANTABILITY, NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR    
//     PURPOSE.  SOME STATES DO NOT ALLOW EXCLUSIONS OF AN IMPLIED       
//     WARRANTY, SO THIS DISCLAIMER MAY NOT APPLY TO LICENSEE.           
//
// LIMITATION OF LIABILITY.                                              
//     NOTWITHSTANDING ANYTHING TO THE CONTRARY, EXCEPT FOR BODILY       
//     INJURY, EFINIX SHALL NOT BE LIABLE WITH RESPECT TO ANY SUBJECT    
//     MATTER OF THIS AGREEMENT UNDER TORT, CONTRACT, STRICT LIABILITY   
//     OR ANY OTHER LEGAL OR EQUITABLE THEORY (I) FOR ANY INDIRECT,      
//     SPECIAL, INCIDENTAL, EXEMPLARY OR CONSEQUENTIAL DAMAGES OF ANY    
//     CHARACTER INCLUDING, WITHOUT LIMITATION, DAMAGES FOR LOSS OF      
//     GOODWILL, DATA OR PROFIT, WORK STOPPAGE, OR COMPUTER FAILURE OR   
//     MALFUNCTION, OR IN ANY EVENT (II) FOR ANY AMOUNT IN EXCESS, IN    
//     THE AGGREGATE, OF THE FEE PAID BY LICENSEE TO EFINIX HEREUNDER    
//     (OR, IF THE FEE HAS BEEN WAIVED, $100), EVEN IF EFINIX SHALL HAVE 
//     BEEN INFORMED OF THE POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO 
//     NOT ALLOW THE EXCLUSION OR LIMITATION OF INCIDENTAL OR            
//     CONSEQUENTIAL DAMAGES, SO THIS LIMITATION AND EXCLUSION MAY NOT   
//     APPLY TO LICENSEE.
//
////////////////////////////////////////////////////////////////////////////////

`undef IP_UUID
`undef IP_NAME_CONCAT
`undef IP_MODULE_NAME
